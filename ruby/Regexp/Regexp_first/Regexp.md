# 正規表現

## ある数字の配列を取得する

```ruby
text = <<-TEXT
名前：伊藤淳一
電話：03-1234-5678
住所：兵庫県西脇市板波町1-2-3
TEXT
p text.scan /\d\d-\d\d\d\d-\d\d\d\d/

=> ["03-1234-5678"]
```

`\d` は「1個の半角数字（0123456789）」を意味するメタ文字

解読すると、2文字のメタ文字 - 4文字のメタ文字 - 4文字のメタ文字となる

JSでも同じように書ける

最後の”g”はグローバルオプションと言われるもので　

ある場合は、一致するものすべてを抽出する　

ない場合は、最初の一文字で終了する

```jsx
var text = "名前：伊藤淳一\n電話：03-1234-5678\n住所：兵庫県西脇市板波町1-2-3";
text.match(/\d\d-\d\d\d\d-\d\d\d\d/g);

=> ["03-1234-5678"]
```

### どんな条件文字列にも対応させる

2文字　4文字　4文字の電話番号だけでは汎用性がない

正規表現の法則パターンをみつける

```ruby
text = <<-TEXT
名前：伊藤淳一
電話：03-1234-5678
電話：090-1234-5678
電話：0795-12-3456
電話：04992-1-2345
住所：兵庫県西脇市板波町1-2-3
TEXT
```

**量指定子**をつかって対応させる　`{a,b}` は「直前の文字が a 個以上、b 個以下」みたいに指定できる　`{a}` とすれば、ちょうどa文字数となる

今回のは、 2〜5文字　1文字〜4文字　4文字というパターンとなる

```ruby
\d{2,5}-\d{1,4}-\d{4}
```

```ruby
text = <<-TEXT
名前：伊藤淳一
電話：03-1234-5678
電話：090-1234-5678
電話：0795-12-3456
電話：04992-1-2345
住所：兵庫県西脇市板波町1-2-3
TEXT
p text.scan(/\d{2,5}-\d{1,4}-\d{4}/)
```

### 記号にも対応させる

```ruby
名前：伊藤淳一
電話：03(1234)5678
電話：090-1234-5678
電話：0795(12)3456
電話：04992-1-2345
住所：兵庫県西脇市板波町1-2-3
```

同じようにパターンを考える

2~5文字　カッコの開き　1~4文字　カッコの閉じる　4文字

特定の文字を表すには　”[ ]”を使用する

例として、[A]は、Aを示している。　[ABC]だと、AまたはBまたはCという感じになる。

カッコ開きには　[-)]

カッコ閉じには　[(-]　

これは、ハイフンまたはカッコの1文字という意味になる

### ハイフンの動きに注意する

“-”ハイフンの動きは注意が必要になる

```ruby
[-)]  のような場合は　- または ) の1文字を表す
[a-z]　の場合は、a または　b ・・・・のように続く　半角英字の1文字を表す
[0-9]　の場合は、0 または　１・・・・・になる　半角数字の1文字を表す
[a-z0-9A-Z]　の場合は、********************半角英数字1文字を表す

ただし！！！********************
[-09]　のような場合は、 - または　9 または　０　の１文字を表すので注意が必要
```

- `\d` は半角数字1文字
- `{n,m}` は直前の文字が n 文字以上、m 文字以下
- `{n}` は直前の文字がちょうど n 文字
- `[AB]` はAまたはBが1文字
- `[a-z]` と `[-az]` ではハイフンの意味がちがう
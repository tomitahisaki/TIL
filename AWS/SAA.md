# SAA 試験対策

## SNI

Server Name indication

暗号化通信で使用するサーバー証明書をパブリック IP アドレスではなくドメイン名で判断する技術

SNI に対応した ELB に複数のサーバー証明書を導入すると、ELB が適切なサーバー証明書を判断して通信を転送する

## Auto Scaling

ヘルスチェックのタイプは、EC2/ELB の 2 種類ある

ヘルスチェックの猶予時間：AutoScaling グループ内のリソースが起動してから、初回のヘルスチェックまでの待機期間

ライフサイクルフック：リソースの増減時に任意の処理を実行する機能
ターゲット追跡スケーリング：1 つのメトリクスが指定した目標値になるようにインスタンスを増減する

## S3

マルチパートアップロード：5GB を超える場合のファイルをアップロードするときに利用

## ELB

固定 IP アドレスを関連付けできるのは、NLB のみ

## WebSocket

一つのコネクションから永続的にサーバー/クライアント双方からデータ送信できる技術

通常は、Web アプリの場合、クライアントからのリクエストにサーバーがレスポンスを返して終了

WebSocket は、一度接続したコネクションではクライアントからのリクエストがなくてもサーバー側からデータを送信可能。WebSocket はチャットや株価情報のような、リアルタイムな情報提供を必要とするアプリケーションで使用

## ネットワーク ACL

VPC 上でネットワークアクセスをサブネットごとに制御するファイアウォール

ネットワーク ACL はステートレスなファイアウォール

IP アドレスをもとに、許可・拒否ルールの両方を設定できる

## セキュリティグループ

VPC 上でネットワークアクセスをインスタンスごとに制御するファイアウォール

通信の状態を管理するステートフルなファイアウォール

## AWS WAF

Web アプリケーションに対する攻撃から保護するサービス

## AWS Shield

AWS で実行している Web アプリケーションへの DDoS 攻撃に対する保護サービス

## ENI（Elastic Network Interface）

AWS リソースのネットワークインターフェイスです。オンプレミス環境における NIC（Network Interface Card）と同じ役割を持ち、VPC 内の EC2 インスタンスや NAT ゲートウェイなどに割り当てて利用します

## VPC フローログ

VPC 内の ENI（Elastic Network Interface）に流れるネットワークトラフィック情報を出力する機能

## VPC エンドポイント

VPC 内の AWS リソースから、S3 や DynamoDB などインターネットから直接利用できる VPC 外の AWS サービスへアクセスは、通常インターネットゲートウェイを経由して通信します。「VPC エンドポイント」は、セキュリティ上の制約でインターネットとの通信が制限されているプライベートサブネット内の AWS リソースから、インターネットゲートウェイを経由せずに VPC 外の AWS サービスへアクセス可能にする機能です

## インターネットゲートウェイ

インターネットゲートウェイは VPC 内の AWS リソースとインターネットを接続する機能です

Egress-Only インターネットゲートウェイは、NAT ゲートウェイとインターネットゲートウェイの特徴を併せ持つ IPv6 専用の機能

## NAT ゲートウェイ

NAT ゲートウェイは、プライベートサブネットからインターネットへの通信を可能にする機能

## NAT インスタンス

NAT ゲートウェイと同じくプライベートサブネットからインターネットへの通信を可能にする IPv4 専用の機能

NAT ゲートウェイはマネージドサービスなのに対し、NAT インスタンスは EC2 インスタンスから作成するため、ユーザーが障害対応などの運用管理を実施する必要がある

NAT ゲートウェイでは利用できないポート転送機能を設定できる

## VPC ピアリング

VPC ピアリングは、VPC 同士を 1 対 1 で接続する機能

## VPC のルートテーブル

VPC 内での通信において、どのネットワークへデータを転送するかを定義する機能

- データの転送先を定義できる
- インターネットゲートウェイをターゲットにすることで、VPC からインターネットへ接続できる

## VPC エンドポイント

VPC 内のリソースは VPC エンドポイントから VPC 外の AWS サービスへアクセスできる

VPC エンドポイントからの接続先を制限できる

## AWS PrivateLink

VPC エンドポイントにはゲートウェイ型と AWS PrivateLink（インターフェイス型）があり、Amazon CloudWatch Logs への接続は「AWS PrivateLink」を利用します

## AWS Transit Gateway

複数の VPC や複数のオンプレミスネットワークを相互に接続するハブ機能を持つサービスです

複数の VPC 同士を 1 つのハブで相互に接続できる。ネットワーク経路を簡略化できる

## EC2

Amazon マシンイメージ（AMI）は、EC2 インスタンスを起動するために必要な OS やミドルウェアなどのテンプレート

## インスタンスの分類

- インスタンスタイプ: CPU、メモリ、ストレージ性能、ネットワークキャパシティーの組み合わせ
- インスタンスストア: 揮発性のブロックストレージ
- インスタンスファミリー:

  - M: 汎用
  - T: 汎用（CPU バースト機能）
  - C: コンピューティング最適化
  - R X: メモリ最適化
  - P G F: 高速コンピューティング
  - I D H: ストレージ最適化

- メタデータ: 実行中のインスタンスに関するデータ

## プレイスメントグループ

複数の EC2 インスタンスを論理的にグループ化し、インスタンス間での低遅延な通信や、ハードウェア障害による影響を軽減できる機能

### クラスタープレイスメントグループ

グループ内の EC2 インスタンスを単一 AZ 内の物理的に近い距離を配置する

各 EC2 インスタンス同士の通信は、遅延が発生しにくく高速通信が可能

クラスタープレイスメントグループが所属する AZ に何らかの障害が発生した場合はサービスが利用不能になってしまうため、可用性を犠牲にしてでも EC2 インスタンス間の通信遅延を極力なくしたい場合に利用

### パーティションプレイスメントグループ

グループをパーティションとよばれる論理グループに分割し、それぞれのパーティションに 1 つ以上の EC2 インスタンスが所属します。各パーティションは 1 つのラックが対応しており、ラックには独立した電源とネットワークが配備されています。グループ内の各パーティションはラックを共有しないので、ハードウェア障害による影響を軽減

異なる AZ にインスタンスを配置できる

### スプレッドプレイスメントグループ

スプレッドプレイスメントグループは、グループ内の EC2 インスタンスを異なるハードウェア（ラック）に配置します。パーティションプレイスメントグループではラック内に同一グループの EC2 インスタンスを 1 つ以上配置しますが、スプレッドプレイスメントグループは同一グループの EC2 インスタンスを 1 つしか配置しません。グループ内の各 EC2 インスタンスはハードウェアを共有しないので、ハードウェア障害による影響を軽減

異なる AZ にインスタンスを配置できる

## S3

- Intelligent-Tiering: ミリ秒単位のアクセスが可能で、アクセス頻度の高いデータ
- 標準: ミリ単位のアクセス可能、アクセス頻度の低いデータ
- 1 ゾーン: 1AZ に保存され、ミリ単位病のアクセスが可能な再利用可能で、アクセス頻度の低いデータ
- Glacier Instant Retrieval: アクセスが四半期に一度の存続期間が長いアーカイブデータ
- Glacier Flexible Retrieval: 取得時間が数分ー数時間、アクセスが 1 年に一度の存続期間が長いアーカイブデータ
- Glacier Deep Archive: 取得時間が数時間、アクセスが 1 年未満の存続期間が長いアーカイブデータ

### Transfer Acceleration

ユーザーから S3 バケットへ最適化したネットワークルートを経由して、データを転送する機能

### クロスリージョンレプリケーション

S3 オブジェクトを自動的に異なるリージョンに保存したい場合に利用

### 取り出し方法

- 標準取り出し：デフォルトのオプション
- 大容量取り出し：標準取り出しより時間がかかるが、取り出し料金が低価格になる
- 迅速取り出し：追加オプションを払って、標準取り出しよりも早くデータをとりだせるオプション

### SSE-S3

鍵は、S3 で管理している

S3 で暗号化を行う

### SSE-C

鍵は、ユーザー側で管理

S3 で暗号化を行う

### オブジェクトロック機能

リーガルホールドとリテンションモードがある

リテンションモードは以下のようにわかれている

- ガバナンスモード

  - 権限（s3:BypassGovernanceRetention）を持たないユーザーに対して、指定した保持期間中オブジェクトを読み取り専用にします。権限を持つユーザーのみオブジェクトの更新・削除と、ガバナンスモードの解除ができます。

- コンプライアンスモード
  - ルートユーザーを含む全てのユーザーに対して、指定した保持期間中オブジェクトを読み取り専用にします。保持期間中はルートユーザーを含めてコンプライアンスモードを解除できません。

リーガルホールド
権限（s3:PutObjectLegalHold）を持たないユーザーに対して、リーガルホールドが解除されるまでオブジェクトを読み取り専用にします。権限を持つユーザーのみオブジェクトの更新・削除と、リーガルホールドの解除ができます。

## AWS Organizations

OU（Organizational Units）を利用して、組織を階層的な構造で整理、管理できる

- 複数の AWS アカウントに対して権限を設定できる
- 複数の AWS アカウントの請求を一括処理できる

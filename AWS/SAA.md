# SAA 試験対策

# メインサービス

## SNI

Server Name indication

暗号化通信で使用するサーバー証明書をパブリック IP アドレスではなくドメイン名で判断する技術

SNI に対応した ELB に複数のサーバー証明書を導入すると、ELB が適切なサーバー証明書を判断して通信を転送する

## Auto Scaling

インスタンスのアクセスが高まったときに、新しいインスタンスを増設して、パフォーマンス向上させる機能

ヘルスチェックのタイプは、EC2/ELB の 2 種類ある

ヘルスチェックの猶予時間：AutoScaling グループ内のリソースが起動してから、初回のヘルスチェックまでの待機期間

ライフサイクルフック：リソースの増減時に任意の処理を実行する機能
ターゲット追跡スケーリング：1 つのメトリクスが指定した目標値になるようにインスタンスを増減する

24 時間失敗し続けると、インスタンスの起動プロセスを停止する

起動時間をスケジュールすることはできないので注意

スケーリングタイプ

- 動的スケーリング
  - 簡易スケーリングポリシー：ターゲット追跡スケーリングポリシーの通常設定。アラーム設定に基づいて 1 段階目のスケーリングを実施
  - ステップスケーリングポリシー：アラーム釣果のサイズに基づいてインスタンス数を動的にスケーリングする。1 つ以上のステップ調整値を指定して、複数回の段階的なスケーリングを実施
- 手動スケーリング：希望する容量を調整して、手動でスケーリングを実施する
- スケジュールされたスケーリング：スケーリングする日時を指定して、スケーリングを実行

ターミネーションポリシー：古い EC2 インスタンスが削除される設定であると、Auto Scaling によるインスタンス削減時に、古い既存インスタンスから削除されてしまうので、IP アドレスが変更される。そのため、IP アドレスが切り替わり、連携しなくなるので注意

スケールアウト時に、AutoScaling が起動したインスタンスにデータベースを関連した elastic IP アドレスが付与される設定がないと、インスタンスに設定された IP アドレスが切り替わるので、連携しなくなる

### クールダウン期間

スケーリング終了時、インスタンス数を削減する段階で、いきなりインスタンスを削除しない時間を設定する機能

前のスケーリングアクティビティが実行される前に、Auto Scaling グループが追加のインスタンスを起動・削除が一定期間できなくなる

期間の長さは、インスタンスのウォームアップ期間や、アプリケーションのニーズに基づいて設定可能

デフォルトの設定は、300 秒に設定されている。

## ELB

固定 IP アドレスを関連付けできるのは、NLB のみ

ELB は、ALB・NLB・CLB を対象にできる

### ヘルスチェック

インスタンスの正常・異常を確認し、EC2 の振り分けを行う

### クロスゾーン分散

配下の EC2 の負荷に応じて、複数の AZ にまたがる EC2 インスタンに均等に負荷分散をおこなう

### 暗号化通信

SSL/TSL 証明書を ELB に設定すると、HTTPS や TLS 通信が可能になる。

### スティッキーセッション

セッション中に同ユーザーからきたリクエストを継続して同じ EC2 インスタンスに送信する

### Connecting Draining

インスタンスが登録解除されるか、異常が発生した場合に、バックエンドインスタンスへの新規リクエスト送信を中止する

### ログ取得

機能を有効にすると、S3 にログを収集

### ALB

HTTP トラフィックを HTTPS トラフィックにする場合は、リスナールールを使用して、HTTP を HTTPS にリダイレクトするように設定できる

ALB のリスナー設定において、port:443 を指定することで、可能。

## WebSocket

一つのコネクションから永続的にサーバー/クライアント双方からデータ送信できる技術

通常は、Web アプリの場合、クライアントからのリクエストにサーバーがレスポンスを返して終了

WebSocket は、一度接続したコネクションではクライアントからのリクエストがなくてもサーバー側からデータを送信可能。WebSocket はチャットや株価情報のような、リアルタイムな情報提供を必要とするアプリケーションで使用

## ネットワーク ACL

VPC 上でネットワークアクセスをサブネットごとに制御するファイアウォール

ネットワーク ACL はステートレスなファイアウォール

IP アドレスをもとに、許可・拒否ルールの両方を設定できる

## セキュリティグループ

VPC 上でネットワークアクセスをインスタンスごとに制御するファイアウォール

通信の状態を管理するステートフルなファイアウォール

デフォルトは全て拒否している

セキュリティグループを設定する場合は、CIDR を指定して IP アドレス範囲を設定するか、別セキュリティグループ ID を設定できる

EC2 インスタンスで Auto Scaling を設定している場合は、Auto Scaling グループと EC2 インスタンスで利用しているセキュリティグループを統一し、セキュリティグループ ID を DB 側のセキュリティグループに設定するほうが最適

e.g.

EC2 インスタンスをプライベートサブネットに設置、セキュリティグループにおいて 3306 ポートを許可する設定をする。DB インスタンスのセキュリティグループで Web サーバーがホストされた EC2 インスタンスの IP アドレスを設定する

## AWS Shield

AWS で実行している Web アプリケーションへの DDoS 攻撃に対する保護サービス

## ENI（Elastic Network Interface）

AWS リソースのネットワークインターフェイスです。オンプレミス環境における NIC（Network Interface Card）と同じ役割を持ち、VPC 内の EC2 インスタンスや NAT ゲートウェイなどに割り当てて利用します

## VPC フローログ

VPC 内の ENI（Elastic Network Interface）に流れるネットワークトラフィック情報を出力する機能

CloudWatch でモニタリングできる

## VPC エンドポイント

VPC 内の AWS リソースから、S3 や DynamoDB などインターネットから直接利用できる VPC 外の AWS サービスへアクセスは、通常インターネットゲートウェイを経由して通信します。

「VPC エンドポイント」は、セキュリティ上の制約でインターネットとの通信が制限されているプライベートサブネット内の AWS リソースから、インターネットゲートウェイを経由せずに VPC 外の AWS サービスへアクセス可能にする機能です

インターネットを介せず、VPC 内のサービスから VPC 外の AWS サービスに接続可能。インターネットを通さずに EC2 インスタンスか S3 バケットへの通信を実施することができる。同一リージョン内の通信料金は無料。コストを削減できる。

## インターネットゲートウェイ

インターネットゲートウェイは VPC 内の AWS リソースとインターネットを接続する機能です

Egress-Only インターネットゲートウェイは、NAT ゲートウェイとインターネットゲートウェイの特徴を併せ持つ IPv6 専用の機能

## NAT ゲートウェイ

NAT ゲートウェイは、プライベートサブネットからインターネットへの通信を可能にする機能

セキュリティが強化される構成は、Web サーバーとデータベースサーバーの両方をプライベートサブネットに移行して、NAT ゲートウェイをパブリックサブネットに設置する構成。
パブリックサブネットの踏み台サーバーもしくは ELB を介して、またはプライベートサブネットへの VPN 接続を介して、外部 PC からプライベートサブネット内への Web サーバーへのアクセスが可能

## NAT インスタンス

NAT ゲートウェイと同じくプライベートサブネットからインターネットへの通信を可能にする IPv4 専用の機能

NAT ゲートウェイはマネージドサービスなのに対し、NAT インスタンスは EC2 インスタンスから作成するため、ユーザーが障害対応などの運用管理を実施する必要がある

NAT ゲートウェイでは利用できないポート転送機能を設定できる

## VPC ピアリング

VPC ピアリングは、VPC 同士を 1 対 1 で接続する機能

## VPC のルートテーブル

VPC 内での通信において、どのネットワークへデータを転送するかを定義する機能

- データの転送先を定義できる
- インターネットゲートウェイをターゲットにすることで、VPC からインターネットへ接続できる

## VPC エンドポイント

VPC 内のリソースは VPC エンドポイントから VPC 外の AWS サービスへアクセスできる

VPC エンドポイントからの接続先を制限できる

## AWS PrivateLink

VPC エンドポイントにはゲートウェイ型と AWS PrivateLink（インターフェイス型）があり、Amazon CloudWatch Logs への接続は「AWS PrivateLink」を利用します

## AWS Transit Gateway

複数の VPC や複数のオンプレミスネットワークを相互に接続するハブ機能を持つサービスです

複数の VPC 同士を 1 つのハブで相互に接続できる。ネットワーク経路を簡略化できる

マルチキャストとは、複数のデバイス（ホスト端末）に対して同一データを一斉に送信するネットワーク方法

特定の Transit Gateway をマルチキャストルーターとして動作できる。サブネットをマルチキャストドメインに追加すると、そのマルチキャストドメインに関連付けられたトランジットゲートウェイにすべてのマルチキャストトラフィックが送信される。

## EC2

Amazon マシンイメージ（AMI）は、EC2 インスタンスを起動するために必要な OS やミドルウェアなどのテンプレート

インスタンスの DNS hostnames オプションを有効化しておかないと、起動されたインスタンスで DNS 名を取得できない

パブリック IP アドレスに対応するパブリック DNS ホスト名を受け取るかどうか、Amazon DNS サーバーを通じた DNS 解決が VPC に適用されるかは、VPC の DNS 設定で決まる

スケーラブルなサーバー処理を実現するために、インスタンスに対して Auto Scaling と ELB を設定する。

ELB は、リクエスト処理量によるが、ALB が一般的な Web アプリケーション用

AutoScaling が、高負荷時のスケーリングを自動で実行する

インスタンス種類

- オンデマンド：必要な期間に借りられる
  - キャパシティー予約：特定の AZ で任意の時間における EC2 インスタンスのキャパシティーを予約可能。その期間は、対象のインスタンス起動が保証される。
- リザーブド：長期間契約なので、安い価格で借りられる。ただし、1 年間・3 年間
- スポット：バッチ処理などに使用。

### ActiveMQ キュー

2 つの異なる AZ にある 2 つのブローカーで構成された冗長ペアで設定される。

これらのブローカーは、EC2 及び EFS と同期的に通信する。

## VPC

DNS の使用：起動したインスタンスがパブリック IP アドレスに対応するパブリック DNS ホスト名を受け取るための設定が必要

- enableDnsHostnames: パブリック IP アドレスをもつインスタンスが、対応するパブリック DNS ホスト名を取得するかどうか示す。true だと、DNS ホスト名を取得する
- enableDnsSupport: DNS 解決がリポートされているかどうか示す。
  - false だと、パブリック DNS ホスト名を IP アドレスに解決する Route53 Resolver サーバーが機能しない。
  - true だと、DNS サーバーへのクエリ、またはリザーブド IP アドレスへのクエリは成功する

### ユーザーデータ

EC2 インスタンス起動時に実行されるスクリプトを設定可能

ユーザーデータ：EC2 インスタンスの詳細設定の自動化に利用。Bash スクリプトなどを設定して、インスタンス起動時に実行されるように準備できる

ブートストラップ：インスタンスにユーザーデータを渡すことで、起動時に実行される処理のこと

## AMI

インスタンスの初期起動の設定イメージ。インスタンスの起動に必要な情報を提供する

EC2 において新規にインスタンスを起動する際は、特定の OS 設定がされている AMI を指定して、そのイメージに基づいてインスタンスを起動する。

複数のアカウント間で AMI を共有するには、AMI を別アカウントと共有するための許可設定が必要になる。

AMI を第 3 者の AWS アカウントとのみ共有できるようにするために AMI の LaunchPermission プロパティを変更することが必要。そのために、KMS ポリシーを変更して、第 3 者アカウントに対して、AMI の暗号化に利用した KMS キーを使用できる権限を付与する

## インスタンスの分類

- インスタンスタイプ: CPU、メモリ、ストレージ性能、ネットワークキャパシティーの組み合わせ
- インスタンスストア: 揮発性のブロックストレージ
- インスタンスファミリー:

  - M: 汎用
  - T: 汎用（CPU バースト機能）
    - ファミリー：A1、M5、T3 など
  - C: コンピューティング最適化
    - ファミリー：C5、C6g など
  - R X: メモリ最適化
    - ファミリー：X1、R5、ハイメモリ、Z1d など
  - P G F: 高速コンピューティング
    - ファミリー：P3、Inf1、G4、F1 など
  - I D H: ストレージ最適化
    - ファミリー：H1、D2、I3、I3en など

- メタデータ: 実行中のインスタンスに関するデータ

## プレイスメントグループ

複数の EC2 インスタンスを論理的にグループ化し、インスタンス間での低遅延な通信や、ハードウェア障害による影響を軽減できる機能

### クラスタープレイスメントグループ

グループ内の EC2 インスタンスを単一 AZ 内の物理的に近い距離を配置する

各 EC2 インスタンス同士の通信は、遅延が発生しにくく高速通信が可能

クラスタープレイスメントグループが所属する AZ に何らかの障害が発生した場合はサービスが利用不能になってしまうため、可用性を犠牲にしてでも EC2 インスタンス間の通信遅延を極力なくしたい場合に利用

### パーティションプレイスメントグループ

グループをパーティションとよばれる論理グループに分割し、それぞれのパーティションに 1 つ以上の EC2 インスタンスが所属します。各パーティションは 1 つのラックが対応しており、ラックには独立した電源とネットワークが配備されています。グループ内の各パーティションはラックを共有しないので、ハードウェア障害による影響を軽減

異なる AZ にインスタンスを配置できる

### スプレッドプレイスメントグループ

スプレッドプレイスメントグループは、グループ内の EC2 インスタンスを異なるハードウェア（ラック）に配置します。パーティションプレイスメントグループではラック内に同一グループの EC2 インスタンスを 1 つ以上配置しますが、スプレッドプレイスメントグループは同一グループの EC2 インスタンスを 1 つしか配置しません。グループ内の各 EC2 インスタンスはハードウェアを共有しないので、ハードウェア障害による影響を軽減

異なる AZ にインスタンスを配置できる

## S3

マルチパートアップロード：5GB を超える場合のファイルをアップロードするときに利用

強い整合性モデルを利用しているので、データ更新の反映に読み込み処理と書き込み処理に誤差が生じることはありません。

データ整合性とは、DB やストレージ内のデータへの書き込みリクエストと読み取りリクエストが重複して実行されたとしてもデータ内容が同じ内容を維持できる DB 処理の性能のこと

- 強い整合性モデル：データの更新の際にデータベースをロックすることによって、過去のデータが読み取られないようにしてデータの一貫性（Consistency）を担保します。ロックされる期間が長いほどその間のデータベース・アクセスがブロックされ、可用性（Availability）を犠牲にする
- 結果整合性モデル：データの更新でデータベースがロックされることはないため、可用性とスケーラビリティを維持することができます。 その代わり、データ更新時に読み取りリクエストが発生した場合は、データの整合性が担保されない

- Standard：複数箇所にデータを複製する。頻繁にデータを大量に保存するのに最適
- Standard-IA：infrequency Access の略。低頻度アクセスデータ用のストレージ。One Zone より重要なマスターデータ向け。データ取得は早い。Standard と One Zone-IA の中間の価格
- One Zone-IA：低頻度アクセス用のストレージ。マルチ AZ 分散されていないので可用性が低い。重要ではないデータ向け。
- Intelligent-Tiering: ミリ秒単位のアクセスが可能で、アクセス頻度の高いデータ
- Glacier Flexible Retrieval: 取得時間が数分ー数時間、アクセスが 1 年に数回の存続期間が長いアーカイブデータ
- Glacier Instant Retrieval: ミリ単位で取り出し可能な、アクセスが四半期に一度の存続期間が長いアーカイブデータ
- Glacier Deep Archive: アクセスが 1 年未満の存続期間が長いアーカイブデータ。標準取り出しで 12 時間以内、大容量取り出しで 48 時間以内。ライフサイクル管理指定

プレフィックス機能

- 日付ベースでアップロードを分散することで、3,500 リクエスト/秒、データ取得で 5,500 リクエスト/秒をサポートできるようにパフォーマンス向上ができる

暗号化は、S3 バケットを作成すると、デフォルトで有効化される。アクセスログファイルは、S3 バケットに保存される前に自動的に暗号化される。

### ストレージクラス分析

ストレージアクセスパターンを分析し、適切なデータを適切なストレージクラスに移行すべきタイミングかを判断できる

ストレージクラス分析がフィルタリングされたデータセットのアクセスパターンを一定期間監視することで、最適なライフサイクルポリシーを設定することができます。

### S3 Select

シンプルな SQL ステートメントを使用して、S3 オブジェクトのコンテンツをフィルタリングし、必要なデータのサブセットのみ取得できる。

S3 が転送するデータ量を削減でき、データ取得に要するコストを削減し、待ち時間を改善できる

### Access Analyzer

AWS アカウントの外部からアクセスできるリソースを特定する総合的な解析結果を生成する。S3 バケットに対する外部アカウントからのアクセス情報を分析して、不正なアカウントアクセス設定がないかを確認可能。

### ボールトロック機能(Vault Lock)

S3 Glacier のアクセスを制御する機能

ボールトロックポリシーを使用して、コンプライアンス管理を適用することができる

そして、ボールトロックを使用することでポリシーが編集できないように設定可能

ボールト：Glacier でデータをアップロードしたときに、データをアーカイブ化して圧縮したあとに保存しているスペースの名前

### ライフサイクルポリシー

期間を定めて、データを削除するなどの設定が可能

### Transfer Acceleration

ユーザーから S3 バケットへ最適化したネットワークルートを経由して、データを転送する機能

### クロスリージョンレプリケーション

異なる 2 つのバケット間で、オブジェクトを自動的に非同期でコピーする機能

リージョン間を跨ぐクロスリージョンレプリケーションにより、耐障害性を高める

S3 オブジェクトを自動的に異なるリージョンに保存したい場合に利用

設定すると、S3 バケットにオブジェクトが作成・更新・削除された際のイベントトリガーとして、別の S3 バケットに対してオブジェクトデータのレプリケーションが実行される。

### クロスアカウントアクセス

S3 バケットのクロスアカウントアクセスを有効化して、S3 バケットのリクエスタ支払い機能を有効化

リクエストしたユーザーに支払いが発生する

クロスリージョンレプリケーションと異なり、レプリケーションしないので、コストを圧縮できる

### 取り出し方法

- 標準取り出し：デフォルトのオプション。所要時間：3~5 時間
- 大容量取り出し：標準取り出しより時間がかかるが、取り出し料金が低価格になる。所要時間：5~12 時間
- 迅速取り出し：追加オプションを払って、標準取り出しよりも早くデータをとりだせるオプション。所要時間：1~5 分以内

### SSE-S3

S3 の標準暗号化方式で簡易に利用可能

暗号化キーの作成・管理を S3 で自動で実施

鍵は、S3 で管理している

S3 で暗号化を行う

### SSE-C

ユーザー側が指定したキーによるもの

鍵は、ユーザー側で管理

S3 で暗号化を行う

### SSE-KMS

KMS で設定した暗号化キーを利用した暗号化を実施

ユーザー側で KMS を利用して暗号化キーを作成・管理することが可能

### CSE

クライアント側の暗号化

S3 へ送信する前にデータを暗号化する

KMS などを利用して、暗号化キーを作成・管理

アプリケーション内に保存したマスターキーを使用

### 署名付き URL

非公開設定されたオブジェクトに対して有効期期限のついた URL を発行することで、AWS アカウントを持っていないユーザーでも一時的にアクセスが可能になる機能

オブジェクトのダウンロード、アップロード用の URL の発行可能

### MFA Delete

S3 のバージョニング機能を使用して管理されているオブジェクトを削除する際に、MFA デバイスの認証が必要となる機能

MFA Delete を利用すると、ルートユーザー（AWS との契約を行ったアカウント）のみが、世代管理されたデータの削除権限を持つようになる

### ACL

他の AWS アカウントに対して、S3 バケットやオブジェクトへの読み取りまたは書き込みを許可できる機能

バケットやオブジェクトへの読み取りや書き取りを許可する

### バケットポリシー

自 AWS アカウントの IAM ユーザーや他の AWS アカウントのユーザーに対して、S3 のデータへのアクセス権限を設定できる機能

### オブジェクトロック機能

リーガルホールドとリテンションモードがある

リテンションモードは以下のようにわかれている

- ガバナンスモード

  - 権限（s3:BypassGovernanceRetention）を持たないユーザーに対して、指定した保持期間中オブジェクトを読み取り専用にします。権限を持つユーザーのみオブジェクトの更新・削除と、ガバナンスモードの解除ができます。

- コンプライアンスモード
  - ルートユーザーを含む全てのユーザーに対して、指定した保持期間中オブジェクトを読み取り専用にします。保持期間中はルートユーザーを含めてコンプライアンスモードを解除できません。

リーガルホールド
権限（s3:PutObjectLegalHold）を持たないユーザーに対して、リーガルホールドが解除されるまでオブジェクトを読み取り専用にします。権限を持つユーザーのみオブジェクトの更新・削除と、リーガルホールドの解除ができます。

## AWS Organizations

OU（Organizational Units）を利用して、組織を階層的な構造で整理、管理できる

- 複数の AWS アカウントに対して権限を設定できる
- 複数の AWS アカウントの請求を一括処理できる

## SCP(Service Control Policy)

ホワイトリスト形式のポリシー

SCP が設定された組織のメンバーアカウントは、SCP 内で許可した範囲内において、そのアカウント内のメンバーに対して IAM ポリシーによってアクセス権限を付与できるアカウントになる

## IAM ポリシー

ポリシーの種類

- ID ベースのポリシー：IAM ユーザー、IAM グループ、IAM ロールにアタッチするポリシー
  - 管理ポリシー
    - AWS 管理ポリシー：AWS によってあらかじめ定義されたポリシー
    - カスタマー管理ポリシー：ユーザーが定義するポリシー、世代管理可能
  - インラインポリシー：ユーザーが対象毎に作成・付与するポリシー
- リソースベースのポリシー：AWS リソースにアタッチするポリシー

IAM ロールの信頼ポリシー

- IAM ロールの権限委譲操作に特化したポリシー
- 信頼ポリシーを関連付けた IAM ロールが保有する権限を、信頼ポリシーの操作主体である Principal に移譲できる

## IAM データベース認証

IAM ユーザーまたは、IAM ロール認証と認証トークンを使用して、RDS DB に接続可能

通常 DB は、ユーザー ID とパスワードで認証する

# コンピューティング

## VPC リンク

API Gateway から、直接プライベートサブネット内のリソースにアクセスするために設定する機能

## Lambda

トリガーを設定して、実行できる。リクエストが不定期に発生し、1 リクエストが数秒で終わる処理に適している

- S3 オブジェクト作成時
- DynamoDB のテーブルに変更があるとき
- SQS のキューにメッセージが追加されたとき
- SNS からトピックが通知されたとき

Lambda 関数は、イベントに応じて自動的にスケールし、発生したイベントの数だけ同時実行されます。ある特定の時点で、実行中の Lambda 関数の個数を同時実行数と呼ぶ

Lambda 関数が初めて実行される場合や一定期間実行されていない場合は、Lambda 関数の実行環境であるランタイム環境の準備に時間がかかるため、Lambda 関数の処理が開始されるまで時間がかかります。（コールドスタート）
一方、同じ Lambda 関数に対するリクエストが継続的に発生する場合は、ランタイム環境が再利用されるため準備処理が省略され、Lambda 関数の開始までの時間が短くなります。（ウォームスタート）

リクエスト増加時には、既存のリソースでは追いつかないため、新しいリソースが必要になる。その結果、新しいリソースを準備するためにコールドスタートが必要になり、遅延が発生する。

遅延しないために、ランタイム環境を事前に準備する「プロビジョニングされた同時実行」がよい

VPC アクセスを設定することで、下記のいずれかができなくなる

- プライベートサブネットへのアクセスができなくなる
- インターネットへのアクセスができなくなる

IAM ロールを Lambda ファンクションに設定したアクセス権限を付与することで他 AWS リソースへのアクセスが許可される

例えば、lambda が DynamoDB からデータを取得したい場合、DynamoDB へのアクセス許可ポリシーを設定した IAM ロールを付与する必要がある

デフォルトの設定時間

- タイムアウト：3 秒
- 最大実行時間：900 秒

最大データ容量は、10GB まで

## ECR(Elastic Container Registry)

コンテナイメージを登録・管理ができる。ECR に登録したコンテナイメージから、ECS が参照し、コンテナを起動する

## ECS(Elastic Container Service)

コンテナを管理・実行できる

コンテナオーケストレーション

主要要素に、クラスター・タスク・サービスがある

- クラスター：1 つ以上のタスクまたはサービスに構成される論理グループ
- タスク：実行環境の CPU やメモリのスペック、コンテナイメージ、コンテナから他 AWS サービスへのアクセス権限
- サービス：クラスター内で必要なタスク数、タスクと ELB の連携

コンテナには、2 種類の環境がある

- AWS Fargate： コンテナ実行環境は負荷に応じて自動スケーリングされる。サーバーレスでコンテナ実行可能。タスクが実行されないときは料金が発生しない
- EC2 起動タイプ：ユーザーが管理している EC2 インスタンス上でコンテナ実行する。この場合は通常のインスタンス同様に OS・ミドルウェアのアップデートやスケーリングの管理が必要

### ポリシー

Auto Scaling と連携可能

スケーリングプランまたは、スケーリングポリシーを利用した Auto Scaling を構成できる

Auto Scaling グループにアタッチされたスケーリングポリシーを使用して、ターゲット容量の仕様に基づき動的にスケーリングを設定することが可能。

構成は、スケーリングポリシーを設定した Auto Scaling を ECS クラスターにアタッチする。

ALB もアタッチすることで、特定の期間に ECS クラスターが処理負荷の場合にスケーリングする

## EKS(Elastic Kubernetes service)

ECS と同じで、コンテナの管理・実行ができる

kubernetes は、オープンソースのコンテナオーケストレーションプラットフォーム

実行中のアプリケーションの負荷状況に応じてリソース(ポッドやノード)を自動的にスケーリングできる機能がある

- Horizontal Pod Autoscaler：ポッドの数を自動的に増減
- Metrics Server：HPA を動作させるために、CPU 使用率やメモリ使用量の収集が必要で、そのために必要
- Cluster Autoscaler：クラスタ内のノード数を自動的に増減

Fargate 起動モードを選択可能になった。

## Amazon API Gateway

API のキャッシュを有効にできるので、同一リクエストに対する応答速度が向上する

スロットリング制限設定が可能。リクエストが多すぎることで、バックエンドサービスが処理しきれな状態を防ぐ

作成できる API

- WebSocket
- REST

Lambda と組み合わせて、完全にサーバーレスでアプリケーションを実行可能

イメージ
client → API Gateway → Lambda function → DynamoDB

# ストレージ

## Amazon Storage Gateway

オンプレミスから AWS のストレージサービスへのアクセスを高速かつセキュアに行うことのできるサービス

- ファイルゲートウェイ：SMB・NFS プロトコル　 S3、FSx のファイルストレージサービス
- ボリュームゲートウェイ：ISCSI プロトコル　キャッシュ型、保管型の S3 にローカルコピーまたは、スナップショットも保存する。オンプレミスに保存。
- テープゲートウェイ：物理テープストレージの代替として使用

- ボリュームゲートウェイ
  - キャッシュ型：プライマリーは S3 ストレージ
  - 保管型：プライマリーはオンプレミスストレージ

## AWS Snow ファミリー

### Amazon Snowball

オンプレミスの多量のデータを AWS ストレージへ転送するサービス

AWS Snow ファミリーは多量のデータを AWS ストレージへ転送するサービス。利用者には大容量のストレージを備えた機器が AWS から貸し出され、移行対象のデータを機器へ取り込んでから AWS へ返送すると、データが Amazon S3 へ保存される仕組みです。また、貸し出される機器には CPU（vCPU）やメモリなどを潤沢に搭載したものを選択でき、データ転送だけでなく、IoT 端末やエッジコンピューティング（IoT 端末自身、または近いエリアのサーバーで処理を行うこと）を実現することもできます。

- Snowball Edge Storage Optimized：ストレージ利用が主目的。ローカルストレージや大規模データ転送に適している
- Snowball Edge Compute Optimized：エッジコンピューティング向けサービス。vCPU やメモリが潤沢。ネットワークに接続していなくても高度な情報処理を行う場合に適している

### Snowcone

オフラインの転送および AWS DataSync を使用したオンラインでの転送にも対応

### Snowmobile

エクサバイト規模の転送サービス

100PB のストレージを搭載したトレーラー

## Amazon EFS

NFS をサポートするファイルストレージサービス

Amazon EFS では、ファイルシステムに対する読み取り・書き込み性能（パフォーマンス）をユーザーが調整可能

- 汎用パフォーマンスモード ... 一般的な用途向けのモード
- 最大 I/O パフォーマンスモード ... ビッグデータの解析などの大容量データや、数千台のクライアントの処理向けのモード

- 可用性：EFS はリージョン内の複数の AZ にまたがってサービスを提供しています。特定の AZ に障害が発生しても他の AZ でサービスが継続されるため、高い可用性を提供します。また、デフォルトで AWS Backup を使用したバックアップが有効になっています。
- 安全性：EFS はデフォルトで保管時のデータの暗号化が有効になっています。また、EFS ファイルシステムのマウント時に TLS（Transport Layer Security：セキュアな通信を行うプロトコル）の使用もできるので、安全にデータを転送できます。

#### デフォルトで有効な機能

- 自動バックアップ
- 保管されているデータの暗号化

#### スループットモード

- バーストスループットモード：ストレージの容量に従って、ベースライン性能が設定され、一時的に負荷が高くなった場合は 2 倍の性能向上ができる
- プロビジョンスループットモード：ユーザーが予約した（provisioned）性能を AWS が保証してスループットを提供する

NFS プロトコルは、ファイルに対するロック機構が使用されている。

ボリュームに保存したデータ量に伴って、自動的にスケーリングが行われる

## Amazon EBS

ブロックストレージサービス

EC2 のローカルストレージとして利用

1 つの EC2 インスタンスから複数の EBS ボリュームにアタッチできる

ボリュームやスナップショットを暗号化することで機密性を高めることができます。暗号化する際は AWS KMS（Key Management Service：暗号化に使用するキーを作成・管理するサービス）を利用

Amazon EBS は、EC2 インスタンスの内部ストレージと同じように利用できるブロックストレージです。
Amazon EBS は設定によってはインスタンスを終了してもデータを永続的に保持することができます。単一 AZ 内で冗長化され、スナップショット機能や暗号化機能などを備えた、可用性・堅牢性に優れたストレージサービスです。

※EBS は、他の AZ にある EC2 インスタンスから利用できないので、利用するときは、スナップショットを利用して他の AZ に EBS ボリュームを作成する

- 設定によっては EC2 インスタンスを終了してもデータが削除されない
- AWS によって冗長構成が組まれている
- スナップショットを作成できる

ボリュームタイプ

- 汎用 SSD：EC2 インスタンスのルートボリュームや、開発・テスト環境 16,000IOPS Gp2:1,000MiB Gp1:250MiB
- プロビジョン IOPS SSD：高い I/O 性能が必要なシステム 64,000IOPS 1,000MiB
- プロビジョン IOPS SSD(block express)：最大 IOPS とスループット 256,000IOPS 4,000MiB
- スループット最適化 HDD：シーケンシャルアクセスを行うデータやビックデータ、ログの処理 500IOPS 500MiB
- Cold HDD：利用頻度が低いデータ保存 250IOPS 250MiB
- マグネティック：旧世代のボリューム 40-200IOPS 40-90MiB

※OS をインストールにするには、SSD ベースのボリュームを選択する

### RAID 構成

パフォーマンス向上と冗長化を高める目的で、実施される

主に RAID0 と RAID1

RAID0

- パフォーマンス向上
- 複数のディスクを 1 台のディスクのように扱い、読み書きを高速化する構成
- ストライピングと呼ぶ

RAID1

- ボリュームの冗長性を高める。IOPS の向上はしない
- 2 つのボリュームを同時にミラーリングする

## Data Lifecycle Manager(DLM)

EBS のスナップショット取得のライフサイクルポリシーを設定できる

EBS のバックアップであるスナップショットの作成・保存・削除を自動化するスケジュールを設定できる

## Amazon FSx

Amazon FSx はファイル共有に適したファイルストレージサービス

### Amazon FSx For Windows

Amazon FSx For Windows ファイルサーバーは、Windows Server 上に構築されたファイルシステムを提供するストレージサービス

ファイルシステムには SMB プロトコルを使用して複数のクライアント（ファイルシステムを利用する端末）から共有してアクセスできます。
SMB プロトコルは主に Windows コンピュータ間においてファイル共有やプリンタ共有に使用されるプロトコルです。

Amazon EFS が Linux ベースの共有ファイルシステムであるのに対して、FSx For Windows ファイルサーバーは Windows ベースの共有ファイルシステムを提供します

提供している機能

- NTFS：標準ファイルシステム
- SMB：ファイル共有やプリンタ共有に使用されるプロトコル
- AD：ユーザーやコンピュータをドメイン単位で一括管理する機能
- Windows ACL：AD によって実現されるアクセス制御　リソースに対して、アクセス許可・拒否を設定可能
- DFS DFSR：複数のコンピュータに存在する共有フォルダなどを一括管理する機能

### Amazon FSx For Lustre

Amazon FSx For Lustre は、Lustre（ラスター）ファイルシステムを提供するストレージサービスです。Lustre は LinuxOS 用に設計されたオープンソースのファイルシステムで、主にスーパーコンピューターなどの HPC（High Performance Computing）や機械学習の分野で利用されています。大量のクライアントから低レイテンシかつ高スループットにファイルアクセスを行う必要のあるシステムで利用

Amazon S3 との連携

### Amazon FSx for NetApp ONTAP

NFS と SMB の両プロトコルをサポートする共有ファイルストレージを提供し、同じデータに対するマルチプロトコルアクセス(NFS と SMB の同時アクセス)が可能です。これにより、異なるプロトコルを使用するアプリケーションが同一ファイルシステムのデータを共有

SMB の場合は、Window インスタンス側と FSx for NetApp ONTAP 側の、AD に参加が必要

# データベース

データベース一覧

- RDS：RDB 型のデータベース　トランザクション処理など汎用的に利用
- Redshift：ペタバイトのデータを扱うデータウェアハウス　大量データを高速に扱えるので分析に利用
- DynamoDB：Key-Value 型の NoSQL データベース　容量が無制限なのでデータ収集などの大容量データの蓄積に利用
- ElasticCache：インメモリデータベース　高速なアクセスが可能でキャッシュなどの一時的なデータ保存に利用

## RDS

スナップショットで、他アカウントと共有できる

最小限のコストの場合、手動スナップショットで共有可能

削除保護：意図しない削除操作からデータベースを保護する

AZ（Availability Zone）を超えたデプロイメント（マルチ AZ）で、自動レプリケーション＋フェイルオーバーを実現

スケールアップ

インスタンスサイズ、インスタンスタイプ、ストレージタイプ変更することで、スケールアップによるパフォーマンス向上を実施できる

インスタンスタイプ

IO 性能やレイテンシー、シーケンシャル読み取りスループットなどの最適化を図る

- db.m5d：低レイテンシー、非常に高いランダム I/O パフォーマンス、高いシーケンシャル読み取りスループットに向けて最適化された汎用インスタンスクラス

ストレージ種類

- 汎用 SSD：100-10,000 IOPS
- プロビジョンド IOPS：1,000-30,000 IOPS

DB パラメータグループ/オプショングループ：タイムゾーンや最大接続数、監査ログの有効化などの設定変更が可能

### マルチ AZ 構成

AZ 障害が発生しても、停止しないような構成をとること

プライマリー DB がある AZ がダウンした場合に、フェイルオーバーが実施される。

その場合、RDS は DB インスタンスの CNAME レコードをプライマリーからセカンダリーにきりかえることで、セカンダリーを新しいプライマリーとする。セカンダリーは最初から実行できるようにホットスタンバイで待機

### リードレプリカ

パフォーマンス改善のために、リードレプリカを複数作成して、読み取りのみパフォーマンスを向上することができる

レプリケーションラグ：非同期的にレプリケートされる個別のデータベースインスタンスなので、レプリケーションデータが遅れることがあり、最新のトランザクションのいくつかが表示できない可能性がある。

プライマリー DB によるデータ変更直後に、リードレプリカ側では古いデータが参照されてしまう可能性がある

### RDS Proxy

Amazon RDS および Amazon Aurora データベースへの接続を効率的に管理するフルマネージドのプロキシサービス

アプリケーションとデータベースの間に配置することで、データベース接続の管理を効率化し、アプリケーションのパフォーマンス・スケーラビリティ・可用性を向上できる

lambda を利用して、RDS と接続する際は、RDS プロキシをエンドポイント代わりに利用して、接続することが可能

### 拡張モニタリング

RDS の機能を有効化することで、DB インスタンスの OS のリアルタイムメトリクスが確認できるようになる。

モニタリングコストが有料

### ストレージエンジン

MySQL ソフトウェアを利用する際にデータを保存するストレージ側を設定する MySQL コンポーネント。

MySQL では、MyISAM をストレージエンジンに設定可能ですが、RDS では、使用できない

RDS で MySQL を使用する場合は、InnoDB を使用する

## Aurora

Amazon Aurora は、Amazon が設計・開発した MySQL/PostgreSQL 互換のデータベースエンジン

フルマネージド型サービスである Amazon RDS（Relational Database Service）で利用可能なデータベースエンジン

RR（リードレプリカ）という、参照専用のデータベースとして動作するレプリカ（複製）を作成できる。最大 15 第スケールアウト可能

DB インスタンスクラスを変更することで、スケールアップ/ダウンも柔軟に対応

インスタンスクラス・ストレージタイプ・マルチ AZ 配置が設定可能

データベースのスケーリング（拡張、縮小）、高可用性、バックアップ、OS/データベースソフトウェアへのパッチ、サーバーの電源やメンテナンスなどは RDS（AWS）によって管理されます

- クラスターエンドポイント：プライマリインスタンスに接続。DB への全てのアクセスを行う
- 読み取りエンドポイント：レプリカインスタンスに接続。参照のみを行う。
- インスタンスエンドポイント：インスタンスへの直接アクセスを行う。接続先のインスタンスで操作が異なる

データベースのクローン作成機能がある。コピーが発生しないので、高速に作成可能

### Aurora Serverless

インスタンスクラスのサイズを指定せず、データベースエンドポイントを作成できるというサーバーを常時起動しない柔軟性の高い Aurora データベース

DB インスタンスの負荷状況に応じて、自動的に DB インスタンスの起動・停止・スケールアップ/ダウンを実施する

最大と最小のキャパシティを設定して、その範囲でキャパシティを自動で調整できる

不規則な需要に対して最適なデータベースに最適

Aurora Auto Scaling: スケールアウト/イン（リソース数の増減）

### Global Database

データベースを複数のリージョンにまたがって運用できるサービス

複数のリージョンにレプリカ DB インスタンスを展開できる

一般的にディザスタリカバリの指標として使用される RPO（目標復旧時点）を 1 秒、RTO（目標復旧時間）を 1 分未満と定めています。

- データベースアクセスを世界中から高速に行える（レイテンシの向上）
- リージョン単位で発生した大規模な障害の災害対策（ディザスタリカバリ：DR）になる

## Amazon Redshift

データベースサービスの一つ

ペタバイト級のデータを扱えるデータウェアハウス　大量のデータを高速に扱えるため分析用途に利用

クロスリージョンスナップショット：スナップショットを異なるリージョンに保存可能。disaster recovery や異なるリージョンで Redshift を構築するときに有効

スナップショット用の無料ストレージを容易しているが、上限のストレージを超えると課金が発生する

### 拡張 VPC ルーティング

クラスターとデータリポジトリ間の全ての COPY と UNLOAD トラフィックが VPC に通るように強制する。

VPC フローログを使って、COPY と UNLOAD トラフィックを監視する

拡張 VPC ルーティングは VPC セキュリティグループ、ネットワーク ACL、VPC エンドポイント、VPC エンドポイントポリシー、インターネットゲートウェイ、ドメインネームシステム (DNS) サーバーなどの VPC 機能を使用

### Amazon Redshift serverless

データウェアハウスでインフラ管理を不要にし、自動スケーリングと従量課金制で柔軟かつコスト効率の高いデータ分析を行う

### Amazon Redshift ML

機械学習モデルを作成、訓練、デプロイし、SQL を使用して大規模データセットに対して予測分析を行う

### Amazon Redshift Spectrum

S3 上のデータを Redshift の外部テーブルとして参照できるようにした機能です。S3 のデータをいったん Redshift へ取り込んでからアクセスを行うよりも高速にアクセス可能

Lambda で、S3 のデータを分析するより、圧倒的に効率が良い

## DynamoDB

テーブル内のデータに高速にアクセスできるよう、様々なインデックス（書籍の索引のようにデータを一意に特定する仕組み）を作成することができます。
インデックスを効果的に作成することはスループットの向上

自動的に 3 つの AZ にデータが保存されます。単一障害点（SPOF: Single Point Of Failure：ある箇所が故障すると、システム全体が機能不全になる箇所）を持たず、高い可用性を誇る

- オンデマンドモード：書き込み・読み込みのリクエスト単位で利用料金がかかる
  - 利用するキャパシティが予測できないときに選択するモード
- プロビジョニングモード：1 秒間に行う書き込み・読み込みの量で利用料金が異なる。
  - 利用するキャパシティが事前予測できるときに選択するモード。キャパシティ容量に近づくと、400 と ProvisionedThroughExceededException が発せられる

読み込みモード

- 結果整合性のある読み込み
- 強力な整合性のある読み込み

キャパシティユニット・・・読み込みや書き込み量を管理する

大規模で利用する場合には、リザーブドキャパシティがある。100 ユニット単位で購入可能

- WCU：最大 1KB のデータを 1 秒間に 1 回書き込み
- RCU：最大 4KB のデータを 1 秒間に 1 回読み込み

DynamoDB のデータはパーティションという単位で分散して保存される。パーティション分割によって一か所にデータを集中させないようにすることで、プロビジョニング（予約）されたスループットを保てるようにしています。
従って、プロビジョニングされたキャパシティの量、すなわちキャパシティユニットを増やすとパーティションの数が多くなり、スループットが高くなります。

DynamoDB では、ドキュメント型という、階層的なデータ構造をもった JSON 形式のデータの扱いについてもサポートしています
JSON は、階層的なデータ構造を簡単に表現することができるデータフォーマット(形式)

### Dynamo Auto Scaling

auto scaling を設定可能。設定することで、テーブルとグローバルセカンダリインデックス（GSI）のパフォーマンス向上を自動化できる。

テーブルとインデックスを監視して、アプリケーショントラフィックの変化に応じて自動的にスループットを調整する機能

### トランザクション機能

DynamoDB への書き込みなどのトランザクション発生時に特定の処理を実行させることができる機能

- `Put` - `PutItem`：条件付き・条件指定なしで新しい項目を作成、更新する
- `Update` - `UpdateItem`：既存の項目の属性を編集、存在しない項目を追加。既存の項目の追加・削除・更新にも利用
- `Delete` - `DeleteItem`：プライマリーキーに識別される項目をテーブルで削除
- `ConditionCheck`：項目が存在することの確認、項目の特定の属性条件を確認

### バックアップ

- オンデマンドバックアップ：ユーザーが任意のタイミングで作成するバックアップのこと
- ポイントインタイムリカバリ：差分バックアップが定期的に自動で取得される。

### S3 へのエクスポート機能

既存のテーブルデータを任意の S3 バケットに直接エクスポートする機能です。ユーザはこの機能のために独自のアプリケーションを用意したり、追加のコードを記述したりする必要はありません。また、この機能を使用したデータのエクスポートでは、対象のテーブルに設定された RCU を消費せず、テーブルの可用性やパフォーマンスにも影響を及ぼさないという点が大きなメリット

DynamoDB の継続的バックアップの機能（ポイントインタイムリカバリの前提となる機能）を使用しているため、対象のテーブルのポイントインタイムリカバリを有効にしておく必要がある

### Amazon DynamoDB Accelerator（DAX）

DynamoDB のインメモリのキャッシュクラスタです。
DAX を利用することにより、ミリ秒（千分の一秒）だったレスポンスをマイクロ秒（百万分の一秒）レベルのパフォーマンスにまで向上させることができます。

### グローバルテーブル

複数のリージョンにまたがって運用できるサービス

自動的にレプリケートされ、ユーザーは地理的に近いリージョンのテーブルへ高速な読み込みと書き込みが可能になる

### DynamoDB Streams

テーブルに対して行われた直近の 24 時間の変更（追加や更新、削除）をログに保存する機能です。ストリームを参照することによって、いつ誰がどのようにテーブルを更新したかがわかる

書き込み処理をトリガーにして、Lambda によって様々な処理を自動化できる

## ElastiCache

フルマネージド型のインメモリデータベースサービスです。
KVS（Key-Value Store:Key-Value 型のデータストア）型のデータベースエンジン「Memcached」と「Redis」が用意されており、データベースを構築する際に選択することができます

- Memcached：高パフォーマンスを提供する。データの永続保持やアプリケーション機能はないので、シンプルなキャッシュに向いている
- Redis：高パフォーマンス、高可用性と機密性を提供。自動フェイルオーバー、バックストア・リストア・データ暗号化を備えている

# マネジメント、ガバナンス

## CloudFormation

AWS リソースの設計書。JSON または、YAML 形式で記述されている

スタックセット(StackSets)

- 複数の AWS のアカウントもしくは複数のリージョンでスタックを構築したい場合に利用

セクション

- Resources：EC2 インスタンスなどのスタックリソースとそのプロパティを指定する
- Parameters：実行時にテンプレートを渡す値を指定する
- Description：そのテンプレートに関するコメントを指定する

## EventBridge(Cloud Events)

AWS 上のリソースの状態変化やスケジュールに応じてアクションを実行することができるサービス

Lambda と連携して、柔軟なアクションが可能

アクションとしては、API の呼び出しや EC2 を再起動などができる

SNS などは、lambda を介さず、直接連携可能

## GuardDuty

AWS 環境の脅威を検出するサービス。

利用者と無関係な IP アドレスから操作されたり、AWS アカウントに対する攻撃などが発生した場合に脅威として検知する

EventBridge との連携により、脅威を検知してファイルを自動的に削除といった運用が可能

## Trusted Advisor

利用者の AWS 環境を AWS に蓄積されたベストプラクティスと紹介して、推奨されるアクションのアドバイスを行うサービス

監視の代表項目

- コストの最適化：EC2 リザーブインスタンスの最適化,
- パフォーマンス：EC2 インスタンスの使用率
- セキュリティ：開かれたポート
- フォールトレランス：ロードバランサ（ELB）の最適化
- サービスの制限：各サービスの設定された制限値

## CloudWatch Logs

AWS サービスや EC2 インスタンスの OS やアプリケーションのログを収集し、一元管理するサービス

CloudTrail における AWS サービスの操作ログや、VPC フローログ（VPC 利用時の IP トラフィック情報）などを収集することができる。収集したログは、メッセージの内容をフィルタリングして管理者に通知させることができる

EC2 インスタンス上のアプリケーションや OS のログを収集するには、対象の EC2 インスタンスへ CloudWatch エージェントをインストールする必要がある

## CloudWatch

AWS サービスやオンプレミス（自社運用）のシステムを監視し、運用を支援するサービス

しきい値（境界値）を超える・下回るなどした場合に管理者に通報するなど、サービスのリソース（CPU 使用率やストレージの使用状況など）の状態に応じたアクションを取らせることができます。

EC2 の代表的なメトリクス

- 標準メトリクス：CPU 使用率・ディスクの読み取り/書き込み量・ネットワーク使用率
- カスタムメトリクス：メモリ使用量・ディスクの空き容量/使用状況・プロセス情報

複数のメトリクスがしきい値を超えたときにアラームを通知したい場合は、複合アラームを作成する

VPN トンネルのネットワークトラフィック情報を収集可能

仮想プライベートゲートウェイの VPN トンネルの状態・送受信したバイト数が記録される。VPN トンネルに以上が発生した場合にアラームを出すことが可能

UnhealthyHostCount メトリクス：異常なターゲット数を確認するメトリクス。Web サービスを実行する EC2 インスタンスを自動で再開する設定などがある場合に使用する

CloudWatch を UnhealthyHostCount をもとに設定し、モニタリング。異常があれば CloudWatch アラームが ALARM 状態になったときに、異常なインスタンスを置換するように AutoScaling を構成する

### CloudWatch Container Insights

コンテナ環境のメトリクスやログデータを収集するサービス

## CloudTrail

AWS 環境内での「いつ」「誰によって（ユーザーや AWS サービス、API など）」「どのような操作が行われたのか」を記録・保存するサービス

記録されたログは S3 に保存することができます

管理対象

- 管理イベント：ユーザーのログイン、AWS リソース自体の作成・変更・削除などの操作(EC2 インスタンスの作成)
- データイベント：AWS リソースへの細かな操作(S3 内のデータ操作・Lambda 関数の実行)
- インサイトイベント：通常と異なる操作(書き込み API の異常な呼び出しなど)

※管理イベントのみ、デフォルトで有効になっている

操作ログを 90 日以上保存したい場合は、S3 バケットを保存先に指定して、証跡情報を作成する。（直接連携できるので、Lambda 関数は不要）

## Systems Manager

オンプレミス環境と AWS 環境のインフラストラクチャの利用状況を可視化、制御するための統合運用サービス

### Patch Manager

複数の EC2 インスタンスの OS パッチ適用を自動化する

### Session Manager

EC2 インスタンスへブラウザや CLI からセキュアにログインできる機能

### Run Command

EC2 インスタンスに対してリモートでコマンドやスクリプトを安全に実行する

### Automation

AWS リソースへの操作をランブックに従って、自動で実行するサービス

## Elastic Beanstalk

アプリケーションの実行環境を定番の構成で自動構築できるサービス

EC2 インスタンスが複数の AZ に配置された可用性の高い構成を組むことができる。ELB が自動的に構成される

開発者は、用意された環境にアプリケーションをアップロードするだけでデプロイを行える

環境構築あとも、運用が AWS で行われ、OS やアプリケーションのアップデートは自動で行われる

Docker に対応しているので、Dockerfile をもとにコンテナ稼働が可能。

- 単一コンテナもしくは、マルチコンテナ
- コンテナ内の環境の管理はユーザーが行う

## Amazon Service Catalog

CloudFormation テンプレートを製品として登録し、他 AWS ユーザーへ共有できる

# セキュリティ、アイデンティティ、コンプライアンス

## WAF

Web アプリケーションに対する攻撃から保護するサービス

WAF は CloudFront に転送される HTTP・HTTPS リクエストをモニタリングして、WEB アクセスの拒否ルールなどを設定できるウェブアプリケーションファイアウォール

CloudFront・ALB・API Gateway などに割当てて、対応できる

NLB や CLB は対応していない

### Referer 制限

HTTP リクエストに含まれているページ URL に基づいて、その URL リンクへのリクエストを制限する機能です。 外部リンクから自分のサイトに置いてあるファイルをダウンロードされたくない場合などに利用

## KMS

AWS マネージドとカスタマーマネージドがある

- AWS マネージド：AWS が作成・管理。ユーザーは削除不可。暗号化を利用したタイミングで AWS が作成する

- カスタマーマネージド：ユーザーが作成・削除・管理する。ただし、作成した鍵を長期間保持するのはセキュリティ上危険なので、自動ローテーション（定期的な更新）をサポートしている
  キーポリシーは、KMS キーへ適用するリソースベースのポリシー

KMS キーとデータキーの 2 種類の鍵がある。2 種類の鍵で、データの暗号化と復号化を行う

- KMS キー：データキーを暗号化する鍵
- データキー：データを暗号化する鍵。暗号化する対象毎に作成

エンベロープ暗号化：KMS キーとデータキーの 2 種類の鍵を使用して、2 段階で鍵を保護する

鍵に対して、IAM ユーザー・IAM ロール・他の AWS アカウントへの操作可能な権限を設定する

鍵を複合したい場合は、Lambda 関数の IAM ロールをキーユーザーとして追加する

データの暗号・複合はサーバーまたはクライアント側で行う

- サーバー側（SSE）：データが保存されるタイミングで暗号化が行われ、ユーザーがデータを取り出す際もサーバー側が複合して渡す
- クライアント側：サーバーへデータを送信する前にクライアント側で暗号化を行い、データの複合もクライアント側で行う

CloudTrail と連携しているので、鍵の使用ログが記録されるので、利用状況を監査できる

## CloudHSM（Hardware Security Module）

専用ハードウェアデバイスを用いて、暗号化鍵を生成・管理するサービス

貸し出されるハードウェアは世界的なハードウェアの規格（FIPS 140 のレベル 3）で認証済なもの

## Shield

無料版と有償版がある

- Standard：ネットワーク層およびトランスポート層への一般的な DDoS 攻撃から保護する
- Advanced：EC2 インスタンス・Elastic Load Balancing・CloudFront などを標的とした DDoS 攻撃に対して、高度な保護サービスを利用できる

ELB は、ALB・NLB・CLB を対象にできる

# ネットワーク、コンテンツ配信

## AWS Global Accelerator

ユーザーから AWS リソースまでのアクセス経路を AWS ネットワークを利用して最適化するサービス

ユーザーと地理的に近いエッジロケーションから高パフォーマンスな AWS ネットワークを経由して
AWS リソースへアクセスするため、遅延の発生やデータ損失などのリスクを少なくする

2 つの固定パブリック IP アドレスを保有しており、ユーザーはこの固定 IP アドレスへアクセスする。エンドポイントが増減しても IP アドレスに影響なくサービスを継続できるため、可用性が向上する

## Route 53

DNS 運用サービス

- 権威 DNS サーバー
- ドメイン名購入
- ドメイン名の登録・管理

レコードの種類

- NS レコード：ドメインのゾーン情報で管理する DNS サーバー
- CNAME レコード：
- エイリアスコード：CNAME レコードで登録できないものを登録できる
- AAAA レコード：ドメイン名に対応する IPv6 アドレス
- A レコード：ドメイン名に対する IPv4 アドレス
- MX レコード：ドメイン宛メールの配送先メールサーバー

DNS の流れ

- CNAME の場合
  - CNAME（ユーザーが管理）で名前解決し、CNAME で設定した値を返す。再度 DNS クエリがリクエストされ、A レコード（AWS が管理）で名前解決し、IP アドレスを返す。エンドポイントへアクセスする
- エイリアスコードの場合
  - DNS クエリがリクエストされ、エイリアスコードで名前解決し、Route53 でエイリアスコードで設定した値で名前解決し、IP アドレスを返す。エンドポイントへアクセスする

### エイリアスコード

CloudFront や ELB などのリソースをドメインと関連付ける際には、専用のエイリアスコードを利用する

CNAME レコードでは登録できない「ZONE Apex」の別名を登録できる

ZONE Apex：最上位のドメイン名で、www.example.comなどのこと

権威 DNS サーバーに ZONE Apex を設定する場合は、ZONE Apex の NS レコードを登録する必要がある

### ルーティングポリシー

- 複数値回答リーティングポリシー：複数のリソースにヘルスチェックを行い、正常なリソースから最大 8 個の IP アドレスを回答する
- 加重ルーティングポリシー：複数の IP アドレスに対して、設定された重み付けに従って、IP アドレスを回答する
- レイテンシールーティングポリシー：遅延（レイテンシー）が最も小さいリージョンにあるリソースの IP アドレスを回答する
- フェイルオーバールーティングポリシー：通常はプライマリーに設定した IP アドレス、プライマリーに異常なヘルスチェックが発生した場合は、セカンダリに設定した IP アドレスを回答する
- 位置情報ルーティングポリシー：ユーザーの位置情報に基づいて IP アドレスを決める。ユーザーの位置情報から、ユーザーの使用言語に合ったコンテンツがあるリソースの IP アドレスを回答する
- 地理的近接性ルーティングポリシー：ユーザーの位置情報をもとに、ユーザーと地理的にちかいリージョンにあるリソースの IP アドレスを回答する

位置情報とを組み合わせることで、通常時はユーザーの使用言語に応じたコンテンツへアクセスさせ、障害が発生した場合は代替ページを表示させる

### フェールオーバー設定

ヘルスチェックを使用してフェールオーバー構成を実現できる

これは、フェールオーバールーティングポリシー以外のルーティングポリシーにヘルスチェックを適用して、
アクティブ/アクティブフェールオーバーを構成できる

### トラフィックフロー

複数のルーティングポリシーを設定できる機能。ルーティングポリシーの関係をツリー状に表示させ、複雑な設定を視覚的に分かりやすくする

### ホストゾーン

ゾーン情報を管理する

パブリックホストゾーン：インターネットなどで VPC 外に公開されたドメインの DNS レコードを管理する

プライベートホストゾーン：VPC 内に公開されたドメインの DNS レコードを管理する

## CloudFront

AWS 上で動作する安全で高速なコンテンツ配信ネットワーク

世界各地に配置されているエッジロケーションから、自動的にクライアントと地理的に近いエッジロケーションが選択される

そしてエッジロケーション内のエッジサーバー（世界各地の配信サーバー）がコンテンツを配信する

エッジサーバーに保存されているキャッシュを削除する機能（Invalidation）がある。
キャッシュを削除すると、クライアントからのリクエストはエッジサーバーからオリジンサーバーへアクセスがいくので、コンテンツが最新化される。

オンプレミス環境のサーバーに適用可能なコンテンツサービス

### キャッシュ TTL

キャッシュを保持する時間

オリジンサーバーのコンテンツなどの更新頻度が高い場合は、CloudFront に保存されているキャッシュの更新頻度を高くする必要がある。

その場合は、キャッシュ TTL を小さい値にする

### ディストリビューション

ディストリビューションではオリジンサーバーやキャッシュなど、コンテンツを配信するための必要な各種設定を行う

- Cache-Control の max-age ディレクティブ：キャッシュの保持時間を設定するプロパティ
- Expires ヘッダー：Cache-Control ヘッダーの Expires ヘッダー。キャッシュの期限切れ日を設定する

### 署名付き URL

署名付き URL は、URL を知っている特定のクライアントが期限付きでコンテンツへアクセスできる機能
個別のファイルへのアクセスを制限可能

S3 の署名付きと同じく、非常に長いランダムな文字列で作成されるので、推測は不可能

署名付き URL 発行時に有効期限を設定すると、有効期限の切れた URL は無効になる

RTMP ディストリビューションでは署名付き URL のみ利用可能

ユーザーが Cookie をサポートしていないクライアントを使用している場合に利用

### 署名付き Cookie

特定のユーザーのみがオジェクトにアクセスできるようにするため、制限することが可能

現在の URL を変更したくない場合に、利用

### 地理的制限

クライアントからのアクセスを国別に制限できる機能がある

クライアントからの接続情報から接続元の国を判別して、ホワイトリストの設定した国からのアクセスは許可、ブラックリストに設定した国からのアクセスは拒否する

### フィールドレベル暗号化

ユーザーから送信された HTML フォームの POST リクエストのうち、一部のフィールドを暗号化し、特定のアプリケーションでのみ複合可能とする機能。

リクエストをオリジンに転送する前に CloudFront がさらにデータを暗号化するので、HTTPS 通信のセキュリティがより強固になる

EC サイトで送信される個人情報のような高い機密性が求められるデータに利用する

### OAI(Origin Access Identity)

有効にしておくことで、S3 バケットに直接アクセスしないように設定する。

S3 バケット内のコンテンツへのアクセスを CloudFront 経由でのアクセスに限定して、クライアントから S3 バケットへの直接アクセスされないようにする機能

## AWS Direct Connect(DX)

オンプレミスなどのユーザー環境から AWS へ、専用回線を使ってセキュアに接続するサービス

インターネットではないので、安定した高速なネットワークを接続できる

オンプレミスから複数の Direct Connect ロケーションへの接続をサポート

利用しているロケーションの障害に備えて複数のロケーションへ接続することで、可用性を高められるようになっています

AWS 側と調整する時間が必要、専用線接続のための設定が必要

Site-to-Site VPN 接続と比較して、低レイテンシーで安全な接続が可能

### Direct Connect ゲートウェイ

Direct Connect と 仮想プライベートゲートウェイの間に配置されて、世界中の各リージョンにある複数の VPC へ接続できるようになる。

VPC は、他 AWS アカウントのものであっても、接続できる。

## AWS VPN

オンプレミスなどのユーザー環境から AWS へ、インターネット VPN でセキュアに接続するサービス

※インターネット VPN：インターネット回線を使って、拠点同士を仮想の専用線で接続し、暗号化通信を行う技術

インターネット回線をつかっているので、専用回線を敷設する Direct Connect よりも安価に、かつ短い期間で接続可能

Direct Connect と違い、即時に実施できる手段

## AWS Site-to-Site VPN(サイト間 VPN)

カスタマーゲートウェイ（オンプレミスのルーター）と VPC の仮想プライベートゲートウェイ（VGW：Virtual Private Gateway）をインターネット VPN で接続するサービス

単一障害点（SPOF：Single Point Of Failure）：ある箇所が故障すると、システム全体が機能不全になる箇所

VPN トンネルは、機器障害に対する高可用性を保つために AWS 側で冗長化されている。カスタマーゲートウェイはオンプレミス内の機器なので、高可用性を保つためには AWS ユーザー側で冗長化する必要がある

# アプリケーション統合

## Step Functions

Lambda 関数及び、複数のサービスをビジネスプロセスとして配列することができるサーバーレスのワークフロー作成・管理サービス

JSON 形式でステートマシンを定義して、ワーカーフローやワーク処理系のアプリケーションを構築することが可能

新板のワークフロー作成/ワーカーアプリ構築ツール

## Simple WorkFlow

デベロッパーが並行したステップまたは連続したステップがあるバックグラウンドジョブを構築・実行・スケールするワークフローの作成・管理サービス

旧型のワークフロー作成/ワーカーアプリ構築ツール

## SQS

メッセージキューイングサービス：個々のサービスやシステムをメッセージを使用して連携する仕組みで、サービス同士の橋渡しを担う

SQS はプル型なので、受信側の都合の良いタイミングで SQS に問い合わせ（ポーリング）を行って、メッセージを受け取る

トラフィック量を想定できないときに、効果的

例として、

データベースに対して大量にリクエストを投入する場合、データベース側が高負荷になり、タイムアウトが発生する可能性がある。
SQS を導入すると、データベースシステム側は負荷に応じてキューのメッセージを処理するのでタイムアウトが発生しにくくなる

キューの種類

- 標準キュー：メッセージの処理順序は保証されず、送信された順番と異なることがある。タイミングによっては、同じメッセージが 2 度配信される
- FIFO キュー：先入れ先出し。送信された順番にキューに残っている最も古いものからメッセージを処理する。二重にメッセージを取得することはない

FIFO のほうが標準より、料金が高い。処理件数（スループット）については、標準がすぐれている
`
優先度を分けてメッセージを処理したい場合は、優先度の高いキューと低いキューを用意して、メッセージを送信する側で優先度によって
メッセージを投入するキューを使い分ける

SQS は、コンシューマー側の複数のインスタンスにメッセージを送信できる。インスタンス側（EC2）はバックエンド処理を並列化して、インスタンス側では状態を維持しない「ステートレス」な方式でジョブの並列処理を実行できる

### 遅延キュー、メッセージタイマー

メッセージの送信者が送信したメッセージの送信者を指定時間経過後に受信したい場合に使用する

キューに投入されたメッセージは、指定された時間が経過したあとに受信可能になる。

遅延キューはキュー全体に対して作用し、メッセージタイマーは特定のメッセージに対して作用する

### ポーリング

機器等に対して、一定時間で順番に問い合わせを行うこと

ショートポーリングとロングポーリングがある

ショートポーリング：メッセージがある場合は、メッセージを返し、ない場合は「空である」というレスポンスを返す

ロングポーリング：メッセージがある場合は、ショートポーリングと同じ挙動。空の場合は、設定された時間を待ち、「空である」というレスポンスを返す

### デッドレターキュー

Lambda 関数の実行に失敗したメッセージを SQS のキューに蓄積できる。

データやシステム都合で、処理がエラーになるようなメッセージがある場合、キューに残り続ける

その場合は、通常のキューから分離し、デッドレターキューに配置する

## 優先度付きキュー

キューの処理順序に優先度をつけることができる。

優先度が高いタスクを最初に処理するようにワークフローを設定できる

### 可視性タイムアウト

一度クライアントがメッセージを受信すると、指定時間が経過するまでメッセージが他クライアントから見えないようにする

ChangeMessageVisibilityAPI を使用して、可視性タイムアウト値を設定する

キューのメッセージは受信側が明示的に削除指示をしない限り削除されない。
SQS のメッセージを受信するクライアントが複数ある場合、メッセージを削除する前に複数クライアントでメッセージ受信する

SQS キューのメッセージがコンシューマーに受信された直後は、メッセージに残ったままになる。他のコンシューマーが同じメッセージを再処理しないように可視性タイムアウトを設定する。

しかし、他のコンシューマーが受け取るためにタイムラグが発生する可能性があるので、適切なタイムアウト時間を設定する

## SNS

メッセージングサービス

E メールや SMS、Lambda 関数、SQS を通して、複数のアプリケーションやユーザーに対して同時にメッセージを配信する。

プッシュ型なので、サブスクライバーの状態に関係なく配信する

サブスクライバーは、メッセージを受け取りたいトピックとプロトコルを選択する

FIFO トピックを導入することで、複数のサブスクライバーに厳密なメッセージの順序付けと重複を排除したメッセージ配信を提供

# 分析

## Kinesis

ストリーミングデータをリアルタイムで収集・処理するサービス

ストリーミングデータ：継続的に生成されるデータ

## Kinesis Database Streams

外部から送信されるストリーミングデータを収集するサービス

センサーなどを生成したストリーミングデータを Kinesis Database Streams のストリームに送信し、データの分析や機械学習を行う他サービスがリアルタイムに読み取って処理する

シャード：単位で、分割して並列処理が可能

Kinesis の 1 つのシャードは、1MB /秒のデータ入力と 2MB /秒のデータ出力の容量を提供しています。 1 つのシャードは、1 秒あたり最大 1000 の PUT レコードをサポートしています

## Kinesis Video Streams

カメラやその他デバイスからリアルタイムで動画データを取り込むサービス

取り込んだ動画データは、他 AWS サービスと統合して、解析・加工・再生などに利用できる

## Athena

S3 上のデータに対して標準 SQL を実行できるデータ分析サービス

サーバーレスなので、EC2 などのインフラのセットアップや管理が不要

Redshift も同じですが、インフラが必要になる。プロトタイプの検証や分析などをしたいケースに向いている

CSV や JSON などの一般的データ形式に加えて、Hadoop でも利用可能な Parquet などのデータ形式にも対応している

## Glue

サーバーレス ETL サービス

複数のデータソース（S3, DynamoDB）からデータを抽出し、変換・統合したデータをターゲット（Redshift）へ格納するといった、データ分析における橋渡しの役割を担います

ETL:Extract, Transform, Load を意味する。データソースをもとに、データを統合してデータウェアハウスへ格納する一連のプロセス

オンプレミスのデータベースも選択できる。ただし、指定可能なデータベースは、JDBC(Java Database Connectivity) という標準的なインタフェースに対応しているデータベースが対象になる。

内部では、

- クローラー：データソースからデータを抽出し、データカタログを作成する
- データカタログ：抽出したデータのメタデータが保存されたもの。
- ETL エンジン：データソースからデータを抽出し、ターゲットへ書き出す処理をする。データをターゲットへ書き出す処理をジョブとよぶ

## EMR(Elastic MapReduce)

ビックデータの処理や分析を行うサービス

ビッグデータを処理する既存のフレームワークである Hadoop や Spark を用いている。

データを複数配置して並列に処理する「分散処理」により、迅速かつ効率のよい処理を実現している

## EMRFS

S3 を EMR クラスターからファイルシステムとして利用できるようにした機能

データを永続的に保持でき、EMR クラスターが終了してもデータは失われない

S3 が保つ機能も備わってます。

## HDFS

分散処理ソフトウェア「Hadoop」のファイルシステム

EMR では、マスターノードとコアノードを利用する

EMR クラスターが終了すると、データは失われる

## QuickSight

サーバーレスに大容量データを分析し経営に役立てるための BI サービス

EXCEL,CSV,Redshift のデータベースなど、様々なデータソースを基にダッシュボードやレポート、グラフを作成してデータを可視化し、データ分析を役立てる。

## Pipeline

データの移動や変換を自動化するサービス

S3 から DynamoDB へデータを取り込んだり、RDS から Redshift へのデータコピーなどを行うことができる

データの型が異なるストレージやデータベースであっても、変換・移行を行う

# 機械学習

## Comprehend

機械学習を利用した自然言語処理サービス

テキストデータを解析するために様々な機能を提供する

テキスト内の登場人物の識別（エンティティ認識）や、ポジティブやネガティブなどの感情を分析（感情分析）、特定のキーワードを抽出（キーワード抽出）が可能

### Comprehend Medical

医療情報に特化したサービス

電子健康記録、臨床試験、医療ノートなどから重要な情報を抽出する

## Translate

機械学習を利用したテキストの翻訳機能を体児湯するサービス

コンテンツやアプリケーションの複数言語への対応に利用できる

## Textract

機械学習を利用した OCR サービス

スキャンしたドキュメントや PDF からテキストやデータを抽出する

## Transcribe

機械学習を利用した音声認識サービス

音声をテキストに変換する

# その他

## Cognito

モバイルアプリケーションや Web アプリケーション向けに、ユーザー認証機能を提供するサービス

外部認証も可能

## Control Tower

AWS におけるベストプラクティスに基づいた、セキュアなマルチアカウント環境(ランディングゾーン)のセットアップを自動化するサービス

構成や設定、ルールの組み合わせをガードレールとして提供している。セキュリティやコンプライアンスの要件に合わせて、これらを適用することで、アカウントに対する設定のばらつきを防ぐ。

## Macie

S3 バケット内のデータ保護に特化したセキュリティサービス

機械学習とパターンマッチングを用いて、自動的に S3 バケット内のオブジェクトを分析し、個人情報や秘匿技術などの機密データを識別・分類します。S3 バケットのセキュリティとアクセス制御を継続的に評価し、機密データの未暗号化や不適切な共有、漏洩などの問題について、検知した結果をマネジメントコンソール上に反映

## Config

AWS リソースの設定を管理し、記録・評価するサービス

リソースの設定がいつ変更されたか記録し、変更がルールに準拠したものではない場合には非準拠として記録される

## Certificate Manager(ACM)

SSL/TLS 証明書を作成、管理できるサービス

ACM で管理している SSL/TLS 証明書を CloudFront, ELB, API Gateway で適用することでユーザー通信を HTTPS で暗号化するとともに、ドメインの使用権を確認してアクセス先のサーバーが本物であることを証明する

## Lake Formation

安全なデータレイクを簡単かつ迅速に、構築・運用するためのサービス

データが構造化されているかどうかに関係なく、様々なデータを一元的に保存・管理する場所を指す。

データソース(RDS, S3, etc)からデータ取り込み・加工、データカタログにメタデータの書き出しをする

データレイク利用者は、Athena や EMR を使用して、分析する

## AppFlow

様々な SaaS アプリケーションと、AWS サービス間でデータを安全に転送できるサービス

## DocumentDB(MongoDB 互換)

MongoDB と互換性のあるドキュメントデータベースサービス

## Secrets Manager

データベースなどにアクセスする際のシークレット（ログイン時などの認証情報）を管理するサービス

アプリケーションなどから AWS リソースへアクセスする際に Secrets Manager からシークレットを取得することにより、ログイン情報をアプリケーションにハードコーディングしたり平文で入力しておく必要がない

ライフサイクル機能を通じて、シークレットの管理・取得・ローテーションができる

## Apache Kafka

大量のストリーミングデータを効率的に取り扱い、リアルタイムで処理するのに適した分散システム

### Managed Streaming for Apache Kafka

Apache Kafka を AWS 上で効率的に運用できるようにするためのサービス

AWS が Kafka クラスターの設定、管理、監視などの運用タスクを担う

### Managed Service for Apache Flink(Kinesis Data Analytics)

リアルタイムでストリーミングデータを処理し、可視化・分析できるサービス

処理用のテンプレートが用意されていたり、標準 SQL のクエリ発行ができたりする

S3 や OpenSearch Service などにデータ分析後に配信するアプリケーションを開発することができる。

ストリーミングデータをクエリ処理で分割して、直接 S3 バケットに保存できる

## Transfer Family

AWS ストレージ上へのセキュアなファイル転送を実現するサービス

SFTP, FTPS, FTP などをサポートし、S3 や EFS へセキュアなファイル転送が可能になる

## Data Firehose(旧 Kinesis Data Firehose)

ストリーミングデータを S3, Redshift, OpenSearch Service などへ配信するサービス

Firehose 自体に、データを変換する処理はないので、形式変換が必要なときは、Lambda などを使う

kinesis data streams との違いは、リアルタイム処理ではなく、60 秒間隔のニアリアルタイム処理になる

## OpenSearch Service(Elasticsearch Service)

検索・分析エンジンサービス。テキストの全文検索やログ分析などの用途に利用できる

内部の分散ストレージを活用することで、大量のデータに対して高速な検索や分析を実現する

高度な検索機能を提供しているので、テキストデータのような非構造化データに対しても、高速なキーワードおよびフレーズ検索が可能

## Forecast

機械学習を利用した時系列予測サービス

過去データから将来の事象を予測できる

## VPC lattice

複数の VPC やアカウントにまたがるアプリケーション間の通信を簡素化し、一元的に管理するサービス

HTTP, HTTPS, gRPC などのアプリケーション層の通信プロトコルをサポートしており、VPC Lattice を介して各アプリケーションを関連付けることで接続を実現

マイクロサービスアーキテクチャと呼ばれる、小型サービスが集まったアプリケーションにおいて、複雑なネットワーク構成を効率的に管理するのに有効

## Outposts

インフラやサービスをオンプレミスに拡張して利用できるサービス

AWS が提供する物理的なラックやサーバーをオンプレミス環境に設置し、ローカルで動作している AWS サービスに低遅延で接続可能

AWS がハードウェアの運用管理を行うため、運用にかかる時間的コストや人件費を抑え、効率的に業務を進めることができます。金融取引やリアルタイムデータ処理など低遅延が要求されるアプリケーションや、規制や契約上の理由でデータをオンプレミスに保持しなければならない場合に最適なサービス

## Security Token Service

AWS リソースへのアクセスを必要とするユーザーやアプリケーションに、一時的なセキュリティ認証情報を提供するサービス

認証情報は、有効期限が設定されており、期限が切れると自動的に無効化される。

企業内のディレクトリサービス（LDAP, Active Directory）を利用して、既存ユーザーに一時的なアクセスを提供したり、異なる AWS アカウント間でのリソースを共有するために一時的な認証情報を飼養して、アクセス権を付与する場合に利用

ウェブ ID フェデレーションを使用することで、ユーザーは Google などの外部 ID プロバイダーを使用したアプリケーションにサインインすることができる。

## Database Migration Service

AWS が提供するデータベース移行ツール

異なるプラットフォーム間でデータベースを移行する作業を簡素化できる

e.g.

オンプレミスのデータベースを AWS クラウド内のデータベースに移行したり、異なるデータベースエンジン（MySQL, PostgreSQL）でデータを移行できる

## Resource Access Manager(RAM)

リソースを複数の AWS アカウントで共有できるサービス

EC2, VPC, Transit Gateway などが共有できるリソース

## Well-Architected Framework

設計原則

- コスト最適化
  - 必要となるサービスを最小限の費用で利用するための推奨事項が記載されている
- セキュリティ
  - システムやデータを保護するための推奨事項が記載されている
  - セキュリティのベストプラクティスを自動化する
- パフォーマンス効率
  - システムの要件に合わせて効率的に使用することと、需要の変化や技術の進化に応じてパフォーマンスを維持するための推奨事項が記載されている
  - 異なるタイプのサーバーやストレージ・設定を使用した比較テストを頻繁に実施する
- 信頼性
  - システムがサービスを提供し続けるための推奨事項が記載されている
  - キャパシティーを推測せず、リソースの追加・削除を自動化することで、需要に対して常に適切なキャパシティで運用できる
- 運用上の優秀性
  - システムで効率よく運用できる推奨事項が記載されている
  - 元の戻すことができる小規模な変更を定期的に実施する
  - 運用上の全ての障害から学ぶ、運用の改善を促進する

## Cost Explorer

利用料金を可視化し、費用の予測と利用状況の詳細な分析を行える

## X-Ray

アプリケーションの動作に関するデータを収集・分析できるサービス

トラブルシューティング目的で利用され、アプリケーション内のリクエストをトレースし、処理時間やレスポンスを分析することで、パフォーマンスのボトルネックやエラーの発生箇所を特定できる

## Compute Optimizer

コンピューティングリソースの設定と使用状況を分析し、コスト最適化とパフォーマンス向上のための推奨事項を提供する

## Directory Service

Microsoft の Active Directory を提供するサービス

## DataSync

オンプレミスと AWS のストレージサービス、または AWS のストレージサービス間で、高速かつ信頼性の高いデータ移行と動機をサポートするサービス

## SageMaker

機械学習のモデルを構築・トレーニング・デプロイするためのサービス

### SageMaker Pipelines

機械学習モデルのデータ準備からデプロイまで、完全に自動化されたワークフローを作成・管理できるサービス

## Quantum Ledger Database(QLDB)

台帳データベース

データの変更履歴をイミュータブルに記録し、履歴が改ざんされていないことを暗号技術で検証できる

データベースの全変更履歴を追跡できるので、金融取引や法的文書の管理など変更履歴の正確性が求められるケースでの利用に適している

## Identity Center(Single Sign-on)

複数の AWS アカウントやアプリケーションへのアクっすを効率的に一元管理するためのサービス

使用することで、一度の認証処理で複数の AWS アカウントやアプリケーションへのアクセスが可能になるシングルサインオンの環境を容易に実現できる

## Network Firewall

VPC 向けのファイアウォール機能を提供するサービス

侵入防止システム（IPS）やドメイン名によるトラフィックのフィルタリングなどセキュリティグループやネットワーク ACL よりもさらに高度な機能を備えている

## ROA(Route Origin Authorization)

BGP(Border Gateway Protocol)で使われる AS(Autonomous System)番号と、IP アドレスの組み合わせが正しいことを示す電子署名が施されたデータ

ROA によって、数多くの BGP ルータ同士でインターネットの経路情報を交換する際に、経路情報の正当性を確認できる

ROA は、Amazon が特定の AS 番号のアドレス範囲を公開することを承認する。これを利用して、パブリックにルーティング可能な IP アドレス範囲の一部または全部を、オンプレミスのネットワークから AWS アカウントに移行できる

IP アドレス範囲はアドレスプールとして表示される

### BGP

自律システム間で経路情報を交換するために設計されたルーティングプロトコル

### AS 番号

ネットワークシステムが互いに認識し合うために利用している番号。TCP/IP では、AS が互いに接続して、大規模なネットワークを形成している

## Security Assertion Markup Language (SAML)

インターネット上で、ID やパスワードなどの認証情報を連携するための SSO を実現するための仕組みの一つ

主に、エンタープライズアプリケーション間の認証で使われている。

IAM Identity Center を利用して、SAML フェデレーションを設定してオンプレミス環境の Active Directory と連携することで、AWS とオンプレミスの両方のリソースに対して、一元的にアクセス」できるシングルサインオンを実現可能

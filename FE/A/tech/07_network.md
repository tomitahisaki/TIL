# ネットワーク
# ネットワーク方式
## LAN
ある建物無いや敷地内などの比較的狭い範囲内で敷設したネットワーク

### 有線LAN
- イーサネット: 最も普及している。 **IEEE802.3**として規格化している
  - CSMA/CD: イーサネットで採用されているアクセス制御方式 伝送路上でのデータ衝突(コリジョン)を検知したら、ランダムな時間を待って、再送する方式

### 無線LAN
IEEE802.11として規格化されている

Wi-fiは、IEEE802.11に準拠した無線LAN装置間で、相互接続性が保証されることを示すブランド名
- アクセスポイント: 無先LANと端末間の通信
- Wi-fiダイレクト: 端末間の直接通信モード
- ESSID: 無線のネットワークを識別する文字列

CSMA/CA: 通信開始時に他のデータを検出した場合は、その通信が終了後、ランダムな時間を待ってから通信を開始する方式

## WAN
遠隔地にあるLAN同士等を接続する広域ネット

- 専用線サービス: 特定の相手先との間を固定先に接続
- 回線交換サービス: 必要な時だけ接続。接続時間で課金
- パケット交換サービス: データを一定の大きさ(パケット)に分割。回線は共用

VPNは、多くの利用者で共有される公衆回線などを、あたかも専用線のように使える仮想的なネットワーク
- インターネットVPN: インターネット利用する
- IP-VPN, 広域イーサネット: 通信事業者の独自の閉域網を使用する

## モバイル通信サービス
通信事業者の電波を使って、スマホやタブレットなどでインターネットに接続するサービス

### MVNO
自前の回線網を持つ通信事業者の移動体通信網を借用し、自社ブランドで通信サービスを提供する事業者

### 5G
第5世代移動通信システム 超高速・超低遅延・多数同時接続の特徴をもつ

輻輳: 通信が急増することによって、ネットワークの許容量を超えて、繋がりにくくなる現象

### キャリアアグリゲーション
複数の異なる周波数帯を束ねて、より広い帯域をつかうことで無線通信の高速化や安定化を図る手法

## IoTネットワーク
あらゆる身の回りのものがつながること

LPWA: 低速だが、低電力で広範囲をカバーするネットワーク

# 02 通信プロトコル
## OSI基本参照モデル

各階層をしめす。覚え方は上位層から**あ・ぷ・せ・と・ね・で・ぶ**
| 階層 | 名称 | 役割 |
| ---- | ---- | ---- |
| 第7層 | アプリケーション層 | アプリケーション固有の機能を提供する |
| 第6層 | プレゼンテーション層 | データの表現形式を統一する |
| 第5層 | セッション層 | 通信の開始から終了までを提供する |
| 第4層 | トランスポート層 | エンドシステム間の通信の信頼性を確保する |
| 第3層 | ネットワーク層 | エンドシステム間の通信を提供する |
| 第2層 | データリング層 | 隣接したコンピュータ間の通信を提供する |
| 第1層 | 物理層 | ネットワークの物理的な機能を提供する |

## TCP/IP
ネットワーク上でコンピュータ同士が通信するときに使用する手順や約束事

OSI参照モデルもあるが、TCP/IPがデファクトスタンダードになっている。
- デファクトスタンダード: 市場原理によって最も多くの利用者を獲得し、事実上の業界標準

| OSI参照モデル | TCP/IP | 主なプロトコル |
| :-----------: | :----: | :------------: |
| アプリケーション層 | アプリケーション層 | HTTP, FTP, TELNET, <br> SNMP, NTP, SMTP, <br> POP3, IMAP4|
| プレゼンテーション層 | ^        | ^ |
| セッション層 | ^      | ^  |
| トランスポート層 | トランスポート層 | TCP, UDP |
| ネットワーク層 | インターネット層 | IP, ICMP, ARP |
| データリング層 | ネットワークインタフェース層 | PPP, PPPoE |
| 物理層 | ^ | ^ |


### アプリケーション層のプロトコル
- HTTP: HTML文書などを送受信する
- FTP: ファイル転送する
- TELNET: 遠隔地にあるコンピュータにリモートログインして操作する
- SNMP: ネットワーク上の構成機器や障害時の情報収集を行う
- NTP: タイムサーバの時刻をもとに複数のコンピュータの時刻を同期させる
- SMTP: メール送信やメールサーバ間でメールを転送する
- POP3: メールサーバのメールボックスからメールを受信する
- IMAP3: POPとは違い、メールサーバ上のメールボックスから、必要なものだけを選択し、受信する

### トランスポート層のプロトコル
- TCP: 通信相手と通信できたか確認する。 信頼性の高いデータ転送を提供する
- UDP: 信頼性は保証しないが、高速なデータ転送を提供する

### インターネット層のプロトコル
- IP: IPアドレスを用いて、データを通信相手まで届ける
- ICMP: 通信相手との通信状況をメッセージで返す

pingは、ICMPを用いて、IPパケットが通信相手に正しく届いているかを確認するためのコマンド

- MAC: LANボードやLANカードなどのNICに予め割り振られた世界で一意の物理アドレス
- ARP: IPアドレスからMACアドレスを取得するときにつかわれるプロトコル
- RARP: MACアドレスからIPアドレスを取得するときに使用するプロトコル

### ネットワークインタフェース層のプロトコル
- PPP: 2地点間を接続して通信する。ダイヤルアップなどで用いる
- PPPoE: LAN上でPPPを行い、常時接続する

# 03 ネットワーク接続機器
## パケット
ネットワーク上を流れるデータを小さく分割したもの

## データ転送単位
広義のいみでは、パケットと呼ばれる。

OSI参照モデルなどでは、階層ごとのデータを
- セグメント(トランスポート層)
- パケット(ネットワーク層)
- フレーム(データリンク層)

送信時に、上位層から下位層にデータを移すときに、ヘッダ情報を付与する。

逆の受信時は、上位層に上がるたびに、ヘッダ情報は削除されていく

- TCPヘッダ: 送信元と宛先のポート番号
- IPヘッダ: 送信元と宛先のIPアドレス等
- MACヘッダ: 送信元と宛先のMACアドレス

## ネットワーク接続機器
LAN内、LAN同士、LANとWANなどを接続するとき、ネットワーク接続機器を使用する

階層ごとに示す。覚え方は上位層から**ゲ・ル・ブ・リ**

| 階層 | 名称 | 接続機器 |
| ---- | ---- | ---- |
| 第7層 | アプリケーション層 | ゲートウェイ |
| 第6層 | プレゼンテーション層 | ^ |
| 第5層 | セッション層 | ^ |
| 第4層 | トランスポート層 | ^ |
| 第3層 | ネットワーク層 | ルータ・L3スイッチ |
| 第2層 | データリング層 | ブリッジ・スイッチングハブ・L2スイッチ |
| 第1層 | 物理層 | リピータ |

- ゲートウェイ: トランスポート層以上で中継。プロトコル変換する
- ルータ: ネットワーク層で中継。IPアドレスを解析し、中継する
  - L3スイッチ: ルータと同じ機能を持つ
- ブリッジ: データリンク層で中継。MACアドレスを解析し中継
  - スイッチングハブ: LANケーブルを束ねる集線装置
  - L2スイッチ: スイッチングハブと同じ機能をもつ
- リピータ: 物理層で中継。データを増幅・整形する

デフォルトゲートウェイ: 異なるネットワークを接続する出入り口となる装置

# 04 IPアドレス
TCP/IPネットワーク上にある端末やネットワーク機器を識別するための番号

## ドメイン名
IPアドレスを、人が理解しやすいように英字や数字、一部の記号を使って文字列に置き換えた別名

例えば、`www.ipa.go.jp`の場合、下記の意味となる
- jp: 日本の国
- go: 政府関係(独立行政法人)
- ipa: 組織
- www: 上記のネットワークに属しているコンピュータ

## DNS
DNSサーバ: ドメイン名やホスト名などとIPアドレスとを対応つけるシステム

DNSに`www.xxx.xx.xx`のIPアドレスはと尋ねると、`192.218.88.180`と答えてくれる

名前解決: ドメイン名からIPアドレスを取得する。もちろん、逆も可能

## グローバルIPアドレスとプライベートIPアドレス
- グローバルIPアドレス: インターネットで使用するIPアドレス。世界で一意になるように`ICANN`で管理される
- プライベートIPアドレス: LANなどの独立したネットワークで使用するIPアドレス 独立したネットワーク内で一意となるように設定

## DHCP
コンピュータがネットワークに接続する際に、必要となるIPアドレスなどの設定を自動的に割り当てるプロトコル

動的にIPアドレスを割り当てる

## ポート番号
通信相手のアプリケーションを識別するために使用される番号

TCP/IPでは、IPアドレスによって、通信相手のコンピュータを特定して、1台のコンピュータ上では複数のアプリケーションが動作している

このアプリケーションを識別する番号がポート番号で、0から65,535まで割り振られる。
- ウェルノウンポート: 0から1,023までは、特定のアプリケーションのために予約されている
  - 20: FTPデータ転送
  - 21: FTPデータ制御
  - 25: SMTP
  - 53: DNS
  - 80: HTTP
  - 110: POP3

## NATとNAPT
LAN上の端末には、プライベートIPアドレスが割り振られている。しかし、インターネットアクセスにはグローバルIPアドレスが必要。 そこで必要となる
### NAT
1つのグローバルIPアドレスと、1つのプライベートIPアドレスを相互変換する技術

### NAPT
1つのグローバルIPアドレスと、複数のプライベートIPアドレスを相互変換する技術(IPマスカレードとも呼ぶ)

# 05 IPアドレスのクラス
32ビットをネットワーク部とホスト部にクラス分けしている

- ホスト: ネットワーク上のサーバや端末

### クラスA
ネットワーク部8ビット・ホスト部24ビットで構成される

ネットワークの先頭ビットは**0**から始まる 10進数では、**1 ~ 127**から始まる

ホストの最大台数は、2**24 - 2 となる
  - マイナス2となる理由
    - ネットワークアドレス: ホスト部の全てが0のアドレスは、そのホストが属しているアドレス
    - ブロードキャストアドレス: ホスト部の全てが1のアドレスは、同じネットワークに属する全てのホストに同一の情報を送信するために使用するアドレス

### クラスB
ネットワーク部16ビット・ホスト部16ビットで構成

ネットワークの先頭ビットは**10**から始まる 10進数では、**128 ~ 191**から始まる

ホストの最大台数は、2**16 - 2 となる

### クラスC
ネットワーク部24ビット・ホスト部8ビットで構成

ネットワークの先頭ビットは**110**から始まる 10進数では、**192 ~ 223**から始まる

ホストの最大台数は、2**8 - 2 となる

### まとめ
| クラス | ネットワーク部 | ホスト部 | 最大接続台数 | 対象ネットワーク | 先頭ビット |
| ------ | -------------- | -------- | ------------ | ---------------- | ---------- |
| A      | 8ビット        | 24ビット | 2**24 - 2    | 大規模           | 0~(1 ~ 127) |
| B      | 16ビット       | 16ビット | 2**16 - 2    | 中規模           | 10~(128 ~ 191) |
| C      | 24ビット       | 8ビット  | 2**8 - 2     | 小規模           | 110~(192 ~ 223) |

## サブネッティング
ホスト部の情報を分割し、複数のより小さいネットワーク(サブネット)を形成することが可能

## サブネットマスク
IPアドレスをネットワーク部とホスト部を区切るために使用するビット例

ネットワーク部には[1]、 ホスト部には[0]を指定する

CIDR: 先程のサブネットより柔軟に対応できるようになったもの。8ビット単位で区切るクラスの枠を完全に取り払い、最上位のビットから1ビット単位でネットワーク部とホスト部の境界を設定できる

例えば、200.170.70.20/28の場合
- 200.170.70.20が、ホストのIPアドレス
- /28は、上位から28ビットが1なので、255.255.255.240というアドレスになる。

## IPv6
IPv4(32ビット)を使っていたが、インターネットの普及でIPアドレス不足になり、IPアドレスを128ビットに拡張したもの

### IPsec
TCP/IPネットワークで暗号通信を行うための通信プロトコル

- AH: 発信元認証、改ざん検知
- ESP: 発信元認証、改ざん検知、ペイロード部の暗号化
- IKE: 秘密鍵の交換

# 06 ネットワーク管理とインターネットの応用
## ネットワーク管理
- SDN: ソフトウェアにより、ネットワーク機器を集中的に制御して、ネットワークの構成や設定を動的に変更する技術の総称

これは、ソフトウェアで定義されるネットワークの意味がある

## インターネットの応用
### URL
Web上で取得したいWebページ等の情報源の場所を表記する方法

スキーム名(http), ホスト名(www.), ドメイン名(jitec.ipa.go.jp), パス名(/1_04hanni_sukiru), ファイル名(_index_mondai.html)

- URI: Web上の情報源を一意に識別する総称

### CGI
Webブラウザからの要求に対して、Webサーバが外部のプログラムを呼び出し、その結果をHTTPを介してWebブラウザに返す仕組み

### MINE
電子メールの規格を拡張して、さまざまな形式を扱えるようにした規格。漢字や音声、画像などのマルチメディア情報を取り扱えるようにした

- S/MINE: 暗号化と署名をする仕組みを加えた規格

### メールヘッダ
SMTPでメールを送信した際に、メール本文のデータに加えて付加される様々な制御情報。

よくあるものは、
- From: 送信者
- To: 送信先
- Cc: 複数に送る場合の宛先
- Bcc: 複数に送る場合の宛先(受信者に送信されない)
- Return-Path: メールサーバが付加するメール送信者
- X-Mailer: メール作成時使用したメールソフト
- Raceived: メールが辿ってきた経路のサーバ

送信者のなりすまし防止
- SMTP-AUTH: メールの送信者を送信サーバが認証する(プロトコル？)
- SPF: 受信サーバは、受信したメールの送信元のIPアドレスと、送信元ドメインのSPFに記載されている送信IPアドレスを比較し、ドメインの詐称がないことを確認する仕組み

## 回線に関する計算
bps: 1秒あたりに転送されるビット数を表す


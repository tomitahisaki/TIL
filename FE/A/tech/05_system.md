# 01 システム構成要素
# システム構成
ミッションクリティカル: 業務遂行する上で不可欠なシステムや、停止すると社会に深刻なダメージを及ぼすシステム

## デュプレックスシステム
現用系と待機系の2系統のシステムで構成され、現用系に障害が生じたときには、待機系に切り替えて処理を続行する形態

- ホットスタンバイ: 待機系はいつでも動作できるような状態(同一業務を行う)で待機させ、障害発生時には直ぐに切り替える形態
- コールドスタンバイ: 待機系は準備し(バッチ処理など)、障害発生時には待機系を起動して切り替える形態

- バッチ処理: データを一定期間または一定量をためてから、まとめて処理する形態
- オンラインリアルタイム処理: データの発生と同時に処理する形態

### バックアップサイト
- ホットサイト: バックアップサイトには、現用系と同じ構成で稼働させておき、データやプログラムもネットワークを介して常に更新を行う形態
- ウォームサイト: バックアップサイトにはハードウェアを準備して、データやプログラムは定期的に搬入しておく形態
- コールドサイト: バックアップサイトのみを確保しておく形態

### 緊急事態の行動計画
- BCP: 災害やシステム障害等の緊急事態に備え、事前に決めておく行動計画
- RTO: 事業が中断してから復旧するまでの目標復旧時間
- BCM: BCPを策定し、PDCAを回して、継続的に維持・向上を図るマネジメント活動

## デュアルシステム
2系統のシステムで構成され、同じ処理を独立して行い結果を照合する形態

## クラスタシステム
複数のサーバをあたかも1台のサーバのように見せかける技術

- HAクラスタ: 可用性を高めることで高信頼化を目的とするシステム構成
  - 負荷分散型クラスタ: 同じ機能の複数のサーバを、並列で稼働させる。各サーバに振り分けて負荷分散する
  - フェールオーバクラスタ: 同じ機能の複数のサーバを、現用系と予備系の2系統に分けて稼働させる。現用系の障害児には、自動的に予備系に切り替える

- HPCクラスタ: 高性能化を目的とするシステム構成

### データベースの共有
- レプリケーション(迅速な複製): 負荷分散型クラスタでは、サーバそれぞれにデータをもち、迅速な複製で整合性をとる
- 共有ディスク方式: フェールオーバ型クラスタでは、現用系と予備系のサーバが1つのディスクを共有する方式
- ミラーディスク方式: 現用系のサーバディスクに書き込まれたデータを予め、予備系のサーバに同時にミラーリングして同期する方式

## グリッドコンピューティング
ネットワークを介して、複数のコンピュータを連携させることで、仮想的に1台の巨大な高性能なコンピュータを作る技術

# 02 クライアントサーバシステム
## 集中処理と分散処理
- 集中処理: 1台の高性能なホストコンピュータにデータや処理を集中させる処理(昔の主流)
- 分散処理: 多くのコンピュータをネットワークで接続し、データや処理を分散させる(イアの主流)

## クライアントサーバシステム
クライアントとサーバでデータや処理を分散させる分散処理

- クライアント: サービスを要求する
- サーバ: サービスを提供する

### 3層クライアントサーバシステム
論理的にプレゼンテーション層・ファンクション層・データベース層の3層構造に分離したアーキテクチャ

- Webブラウザ(プレゼンテーション層): 入力の受付、処理結果の表示等
- Webサーバ(ファンクション層): SQL文の組み立て、HTML文書の組み立て
- データベースサーバ(データベース層): データベースアクセス、処理結果

今では、Webサーバに加えて、APサーバを用いることもある
- Webサーバ: 静的コンテンツへのリクエスト
- APサーバ: 動的コンテンツへのリクエスト

### ストアドプロシージャ
利用頻度の高い命令群を予め、サーバ上に用意しておく

## サーバの仮想化
1台の物理サーバ上で複数の仮想的なサーバを動作させたり、複数の物理的なマシンを1つのサーバとして扱ったりする技術

- ホスト型: ホストOS上の仮想化ソフトウェアを動作させ、その上で複数のゲストOSを動かす、仮想化環境を構築しやすい
- ハイパバイザ型: 物理サーバ上でハイパバイザという仮想化ソフトウェアを動作させ、その上で複数のゲストOSを動かす。クラウドサービスで採用、自由度は高いが、マシンを移行しづらい
- コンテナ型: ホストOS上にコンテナエンジンという管理ソフトウェアを動作させ、その上でコンテナと呼ばれる実行環境を動かす。OSは共通のため自由度は低い。移行性は高い

**ライブマイグレーション**: サーバ仮想化技術において、物理サーバで稼働している仮想サーバを停止することなく、別の物理サーバに移動させる技術

**システムの処理能力向上**
- スケールアップ: 個々のサーバのCPUやメモリなどを増強すること
- スケールアウト: サーバの台数を増やすこと

## シンクライアントシステム
サーバ上でアプリケーションやデータを集中管理することで、クライアント端末には必要最小限の機能しか持たせないシステム シンはThin(薄い)のこと

### VDI
クライアント端末のデスクトップ環境を仮想化されたサーバ上に集約して、サーバ上で稼働させる仕組み

- **NAS**: LANに直接接続して、使用するファイルサーバ専用機

# 03 RAIDと信頼性設計
複数の磁気ディスクを組合せ、1台の仮想的な磁気ディスクとして扱うことで、アクセスの高速化や高信頼性を実現する技術

パリティ: 磁気ディスクが故障したときに、データを修復するための情報

- RAID0: ブロック単位で、**複数の磁気ディスクに分散して書き込む(ストライピング)**。アクセスを並列的に行うことで、高速化が図れる
- RAID1: **磁気ディスク2台に同じデータを書き込む(ミラーリング)**。信頼性は高いが、使用効率が低い
- RAID3: ビット/バイト単位に複数の磁気ディスクに分散して書き込む。**1台の磁気ディスクにパリティを書き込む**。1台故障しても、残ったデータとパリティからデータを復旧できる。
- RAID5: ブロック単位に複数の磁気ディスクに分散して書き込む。さらに、**複数の磁気ディスクにパリティを分散**して書き込む。1台故障しても、残ったデータとパリティからデータ復旧できる

## 信頼性設計
- フォールトアボイダンス: 構成要素を高め、故障そのものを回避する設計
- フォールトトレランス: 構成要素を冗長化し、故障が発生しても必要な機能は維持する設計
- フェールセーフ(安全重視): システムの一部が故障しても、危険が生じないような構造や仕組みを導入する設計。
- フェールソフト(継続重視): 故障が発生した場合、一部のサービスレベルを低下させても、稼働を継続する設計。システムを部分的に停止させても、稼働する(縮退運転)

- フールプルーフ: 人が誤った操作や取り扱いができないような構造や仕組みを、システムに組み込む設計。
- エラープルーフ: ヒューマンエラーを減らすために、排除・代替化・用意化・異常検出・影響緩和に務める

# 04 システムの性能評価
## システムの性能指標
- スループット: 単位時間あたりに処理される仕事の量
- ターンアラウンドタイム: 利用者が処理を依頼してから、結果の出力が終了するまでの時間
- レスポンスタイム: 利用者が処理を依頼してから、端末に処理結果が出始めるまでの時間。応答時間ともいう

## ベンチマークテスト
システムの使用目的に合った標準的なプログラムを実行させ、その測定数値から処理性能を相対的に評価する方法

- SPECint: 整数演算の性能を測定するベンチマークテスト
- SPECfp: 浮動小数点演算の性能を測定するベンチマークテスト
- TPCベンチマーク: トランザクション処理の性能を測定するベンチマークテスト

## MIPS
1秒間に実行される命令数を百万単位で表したもの

### 命令ミックス
命令種別ごとに実行速度と出現頻度を掛け合わせたものの合計

これをMIPSで表すには、たすき掛けで解く
- 1命令 命令ミックスの合計秒
- x命令 1秒

# 05 システムの信頼性評価
評価特性は、**RASIS**で表せる
- 信頼性(Reliability): 要求された機能を、基底された期間実行する特性。正常稼働していること
- 可用性(Availability): 要求されたサービスを、提供し続ける特性。
- 保守性(Serviseability): 故障時に用意に修理できる特性
- 安全性(Sevurity): 情報の漏洩や紛失、不正使用を防止する特性。機密性が高い。

## システムの評価指数
- MTBF: 平均故障間隔(Mean Time Between Failures) システムが故障してから、次に故障するまでの平均時間。正常に稼働している平均時間
- MTTR: 平均修理時間(Mean Time To Repair) システムが故障して修理に要する平均時間
- 稼働率: システムが正常に動作している時間の割合  MTBF/(MTBF + MTTR)

## 複数システムの稼働率
- 直列システム: AとBのシステムが直列で接続されている場合、稼働率は、**a * b**になる
- 並列システム: AとBのシステムが並列で接続されている場合、稼働率は、**1 - (1 - a)(1 - b)**になる

## バスタブ曲線
故障率と時間の関係をグラフにしたときの曲線。曲線がバスタブに似ている

**理由**

1. 初期故障期間: 初期導入時には、設計や構造の誤りなどにより故障率が高くなる
2. 初期故障の誤りを修正し、故障率がほぼ一定となる。(低位で一定となる)
3. 時間経過とともに、摩耗等により故障率が高くなる。

